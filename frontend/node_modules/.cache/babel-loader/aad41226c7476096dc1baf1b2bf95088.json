{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, EventHandler, Internationalization } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, L10n } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { cldrData, getDefaultDateObject, rippleEffect } from '@syncfusion/ej2-base';\nimport { removeClass, detach, closest, addClass, attributes } from '@syncfusion/ej2-base';\nimport { getValue, getUniqueID, extend, Browser } from '@syncfusion/ej2-base';\nimport { Property, Event, isNullOrUndefined, throwError } from '@syncfusion/ej2-base'; //class constant defination.\n\nvar OTHERMONTH = 'e-other-month';\nvar OTHERDECADE = 'e-other-year';\nvar ROOT = 'e-calendar';\nvar DEVICE = 'e-device';\nvar HEADER = 'e-header';\nvar RTL = 'e-rtl';\nvar CONTENT = 'e-content';\nvar YEAR = 'e-year';\nvar MONTH = 'e-month';\nvar DECADE = 'e-decade';\nvar ICON = 'e-icons';\nvar PREVICON = 'e-prev';\nvar NEXTICON = 'e-next';\nvar PREVSPAN = 'e-date-icon-prev';\nvar NEXTSPAN = 'e-date-icon-next ';\nvar ICONCONTAINER = 'e-icon-container';\nvar DISABLED = 'e-disabled';\nvar OVERLAY = 'e-overlay';\nvar WEEKEND = 'e-weekend';\nvar WEEKNUMBER = 'e-week-number';\nvar SELECTED = 'e-selected';\nvar FOCUSEDDATE = 'e-focused-date';\nvar OTHERMONTHROW = 'e-month-hide';\nvar TODAY = 'e-today';\nvar TITLE = 'e-title';\nvar LINK = 'e-day';\nvar CELL = 'e-cell';\nvar WEEKHEADER = 'e-week-header';\nvar ZOOMIN = 'e-zoomin';\nvar FOOTER = 'e-footer-container';\nvar BTN = 'e-btn';\nvar FLAT = 'e-flat';\nvar CSS = 'e-css';\nvar PRIMARY = 'e-primary';\nvar DAYHEADERLONG = 'e-calendar-day-header-lg';\nvar dayMilliSeconds = 86400000;\nvar minutesMilliSeconds = 60000;\n/**\n *\n * @private\n */\n\nvar CalendarBase =\n/** @class */\nfunction (_super) {\n  __extends(CalendarBase, _super);\n  /**\n   * Initialized new instance of Calendar Class.\n   * Constructor for creating the widget\n   *\n   * @param {CalendarBaseModel} options - Specifies the CalendarBase model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function CalendarBase(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.effect = '';\n    _this.isPopupClicked = false;\n    _this.isDateSelected = true;\n    _this.isTodayClicked = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.previousDates = false;\n    return _this;\n  }\n  /**\n   * To Initialize the control rendering.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  CalendarBase.prototype.render = function () {\n    this.rangeValidation(this.min, this.max);\n    this.calendarEleCopy = this.element.cloneNode(true);\n\n    if (this.calendarMode === 'Islamic') {\n      if (+this.min.setSeconds(0) === +new Date(1900, 0, 1, 0, 0, 0)) {\n        this.min = new Date(1944, 2, 18);\n      }\n\n      if (+this.max === +new Date(2099, 11, 31)) {\n        this.max = new Date(2069, 10, 16);\n      }\n    }\n\n    this.globalize = new Internationalization(this.locale);\n\n    if (isNullOrUndefined(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\n      this.setProperties({\n        firstDayOfWeek: this.globalize.getFirstDayOfWeek()\n      }, true);\n    }\n\n    this.todayDisabled = false;\n    this.todayDate = new Date(new Date().setHours(0, 0, 0, 0));\n\n    if (this.getModuleName() === 'calendar') {\n      this.element.classList.add(ROOT);\n\n      if (this.enableRtl) {\n        this.element.classList.add(RTL);\n      }\n\n      if (Browser.isDevice) {\n        this.element.classList.add(DEVICE);\n      }\n\n      attributes(this.element, {\n        'data-role': 'calendar'\n      });\n      this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n      this.element.setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.calendarElement = this.createElement('div');\n      this.calendarElement.classList.add(ROOT);\n\n      if (this.enableRtl) {\n        this.calendarElement.classList.add(RTL);\n      }\n\n      if (Browser.isDevice) {\n        this.calendarElement.classList.add(DEVICE);\n      }\n\n      attributes(this.calendarElement, {\n        'data-role': 'calendar'\n      });\n    }\n\n    this.createHeader();\n    this.createContent();\n    this.wireEvents();\n  };\n\n  CalendarBase.prototype.rangeValidation = function (min, max) {\n    if (isNullOrUndefined(min)) {\n      this.setProperties({\n        min: new Date(1900, 0, 1)\n      }, true);\n    }\n\n    if (isNullOrUndefined(max)) {\n      this.setProperties({\n        max: new Date(2099, 11, 31)\n      }, true);\n    }\n  };\n\n  CalendarBase.prototype.getDefaultKeyConfig = function () {\n    this.defaultKeyConfigs = {\n      controlUp: 'ctrl+38',\n      controlDown: 'ctrl+40',\n      moveDown: 'downarrow',\n      moveUp: 'uparrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      select: 'enter',\n      home: 'home',\n      end: 'end',\n      pageUp: 'pageup',\n      pageDown: 'pagedown',\n      shiftPageUp: 'shift+pageup',\n      shiftPageDown: 'shift+pagedown',\n      controlHome: 'ctrl+home',\n      controlEnd: 'ctrl+end',\n      altUpArrow: 'alt+uparrow',\n      spacebar: 'space',\n      altRightArrow: 'alt+rightarrow',\n      altLeftArrow: 'alt+leftarrow'\n    };\n    return this.defaultKeyConfigs;\n  };\n\n  CalendarBase.prototype.validateDate = function (value) {\n    this.setProperties({\n      min: this.checkDateValue(new Date(this.checkValue(this.min)))\n    }, true);\n    this.setProperties({\n      max: this.checkDateValue(new Date(this.checkValue(this.max)))\n    }, true);\n    this.currentDate = this.currentDate ? this.currentDate : new Date(new Date().setHours(0, 0, 0, 0));\n\n    if (!isNullOrUndefined(value) && this.min <= this.max && value >= this.min && value <= this.max) {\n      this.currentDate = new Date(this.checkValue(value));\n    }\n  };\n\n  CalendarBase.prototype.setOverlayIndex = function (popupWrapper, popupElement, modal, isDevice) {\n    if (isDevice && !isNullOrUndefined(popupElement) && !isNullOrUndefined(modal) && !isNullOrUndefined(popupWrapper)) {\n      var index = parseInt(popupElement.style.zIndex, 10) ? parseInt(popupElement.style.zIndex, 10) : 1000;\n      modal.style.zIndex = (index - 1).toString();\n      popupWrapper.style.zIndex = index.toString();\n    }\n  };\n\n  CalendarBase.prototype.minMaxUpdate = function (value) {\n    if (!(+this.min <= +this.max)) {\n      this.setProperties({\n        min: this.min\n      }, true);\n      addClass([this.element], OVERLAY);\n    } else {\n      removeClass([this.element], OVERLAY);\n    }\n\n    this.min = isNullOrUndefined(this.min) || !+this.min ? this.min = new Date(1900, 0, 1) : this.min;\n    this.max = isNullOrUndefined(this.max) || !+this.max ? this.max = new Date(2099, 11, 31) : this.max;\n\n    if (+this.min <= +this.max && value && +value <= +this.max && +value >= +this.min) {\n      this.currentDate = new Date(this.checkValue(value));\n    } else {\n      if (+this.min <= +this.max && !value && +this.currentDate > +this.max) {\n        this.currentDate = new Date(this.checkValue(this.max));\n      } else {\n        if (+this.currentDate < +this.min) {\n          this.currentDate = new Date(this.checkValue(this.min));\n        }\n      }\n    }\n  };\n\n  CalendarBase.prototype.createHeader = function () {\n    var ariaPrevAttrs = {\n      'aria-disabled': 'false',\n      'aria-label': 'previous month'\n    };\n    var ariaNextAttrs = {\n      'aria-disabled': 'false',\n      'aria-label': 'next month'\n    };\n    var ariaTitleAttrs = {\n      'aria-atomic': 'true',\n      'aria-live': 'assertive',\n      'aria-label': 'title'\n    };\n    this.headerElement = this.createElement('div', {\n      className: HEADER\n    });\n    var iconContainer = this.createElement('div', {\n      className: ICONCONTAINER\n    });\n    this.previousIcon = this.createElement('button', {\n      className: '' + PREVICON,\n      attrs: {\n        type: 'button'\n      }\n    });\n    rippleEffect(this.previousIcon, {\n      duration: 400,\n      selector: '.e-prev',\n      isCenterRipple: true\n    });\n    attributes(this.previousIcon, ariaPrevAttrs);\n    this.nextIcon = this.createElement('button', {\n      className: '' + NEXTICON,\n      attrs: {\n        type: 'button'\n      }\n    });\n    rippleEffect(this.nextIcon, {\n      selector: '.e-next',\n      duration: 400,\n      isCenterRipple: true\n    });\n\n    if (this.getModuleName() === 'daterangepicker') {\n      attributes(this.previousIcon, {\n        tabIndex: '-1'\n      });\n      attributes(this.nextIcon, {\n        tabIndex: '-1'\n      });\n    }\n\n    attributes(this.nextIcon, ariaNextAttrs);\n    this.headerTitleElement = this.createElement('div', {\n      className: '' + LINK + ' ' + TITLE\n    });\n    attributes(this.headerTitleElement, ariaTitleAttrs);\n    this.headerElement.appendChild(this.headerTitleElement);\n    this.previousIcon.appendChild(this.createElement('span', {\n      className: '' + PREVSPAN + ' ' + ICON\n    }));\n    this.nextIcon.appendChild(this.createElement('span', {\n      className: '' + NEXTSPAN + ' ' + ICON\n    }));\n    iconContainer.appendChild(this.previousIcon);\n    iconContainer.appendChild(this.nextIcon);\n    this.headerElement.appendChild(iconContainer);\n\n    if (this.getModuleName() === 'calendar') {\n      this.element.appendChild(this.headerElement);\n    } else {\n      this.calendarElement.appendChild(this.headerElement);\n    }\n\n    this.adjustLongHeaderSize();\n  };\n\n  CalendarBase.prototype.createContent = function () {\n    this.contentElement = this.createElement('div', {\n      className: CONTENT\n    });\n    this.table = this.createElement('table', {\n      attrs: {\n        tabIndex: '0',\n        'role': 'grid',\n        'aria-activedescendant': '',\n        'aria-labelledby': this.element.id\n      }\n    });\n\n    if (this.getModuleName() === 'calendar') {\n      this.element.appendChild(this.contentElement);\n    } else {\n      this.calendarElement.appendChild(this.contentElement);\n    }\n\n    this.contentElement.appendChild(this.table);\n    this.createContentHeader();\n    this.createContentBody();\n\n    if (this.showTodayButton) {\n      this.createContentFooter();\n    }\n  };\n\n  CalendarBase.prototype.getCultureValues = function () {\n    var culShortNames = [];\n    var cldrObj;\n    var dayFormat = 'days.stand-alone.' + this.dayHeaderFormat.toLowerCase();\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      cldrObj = getValue(dayFormat, getDefaultDateObject());\n    } else {\n      cldrObj = this.getCultureObjects(cldrData, '' + this.locale);\n    }\n\n    for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n      var obj = _a[_i];\n      culShortNames.push(getValue(obj, cldrObj));\n    }\n\n    return culShortNames;\n  };\n\n  CalendarBase.prototype.toCapitalize = function (text) {\n    return !isNullOrUndefined(text) && text.length ? text[0].toUpperCase() + text.slice(1) : text;\n  };\n\n  CalendarBase.prototype.createContentHeader = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.element.querySelectorAll('.e-content .e-week-header')[0])) {\n        detach(this.element.querySelectorAll('.e-content .e-week-header')[0]);\n      }\n    } else {\n      if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0])) {\n        detach(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0]);\n      }\n    }\n\n    var daysCount = 6;\n    var html = '';\n\n    if (this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\n      this.setProperties({\n        firstDayOfWeek: 0\n      }, true);\n    }\n\n    this.tableHeadElement = this.createElement('thead', {\n      className: WEEKHEADER\n    });\n\n    if (this.weekNumber) {\n      html += '<th class=\"e-week-number\"></th>';\n\n      if (this.getModuleName() === 'calendar') {\n        addClass([this.element], '' + WEEKNUMBER);\n      } else {\n        addClass([this.calendarElement], '' + WEEKNUMBER);\n      }\n    } // eslint-disable-next-line max-len\n\n\n    var shortNames = this.shiftArray(this.getCultureValues().length > 0 && this.getCultureValues(), this.firstDayOfWeek);\n\n    for (var days = 0; days <= daysCount; days++) {\n      html += '<th  class=\"\">' + this.toCapitalize(shortNames[days]) + '</th>';\n    }\n\n    html = '<tr>' + html + '</tr>';\n    this.tableHeadElement.innerHTML = html;\n    this.table.appendChild(this.tableHeadElement);\n  };\n\n  CalendarBase.prototype.createContentBody = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.element.querySelectorAll('.e-content tbody')[0])) {\n        detach(this.element.querySelectorAll('.e-content tbody')[0]);\n      }\n    } else {\n      if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content tbody')[0])) {\n        detach(this.calendarElement.querySelectorAll('.e-content tbody')[0]);\n      }\n    }\n\n    switch (this.start) {\n      case 'Year':\n        this.renderYears();\n        break;\n\n      case 'Decade':\n        this.renderDecades();\n        break;\n\n      default:\n        this.renderMonths();\n    }\n  };\n\n  CalendarBase.prototype.updateFooter = function () {\n    this.todayElement.textContent = this.l10.getConstant('today');\n    this.todayElement.setAttribute('aria-label', this.l10.getConstant('today'));\n  };\n\n  CalendarBase.prototype.createContentFooter = function () {\n    if (this.showTodayButton) {\n      var minimum = new Date(+this.min);\n      var maximum = new Date(+this.max);\n      var l10nLocale = {\n        today: 'Today'\n      };\n      this.globalize = new Internationalization(this.locale);\n      this.l10 = new L10n(this.getModuleName(), l10nLocale, this.locale);\n      this.todayElement = this.createElement('button', {\n        attrs: {\n          role: 'button'\n        }\n      });\n      rippleEffect(this.todayElement);\n      this.updateFooter();\n      addClass([this.todayElement], [BTN, TODAY, FLAT, PRIMARY, CSS]);\n\n      if (!(+new Date(minimum.setHours(0, 0, 0, 0)) <= +this.todayDate && +this.todayDate <= +new Date(maximum.setHours(0, 0, 0, 0))) || this.todayDisabled) {\n        addClass([this.todayElement], DISABLED);\n      }\n\n      this.footer = this.createElement('div', {\n        className: FOOTER\n      });\n      this.footer.appendChild(this.todayElement);\n\n      if (this.getModuleName() === 'calendar') {\n        this.element.appendChild(this.footer);\n      }\n\n      if (this.getModuleName() === 'datepicker') {\n        this.calendarElement.appendChild(this.footer);\n      }\n\n      if (this.getModuleName() === 'datetimepicker') {\n        this.calendarElement.appendChild(this.footer);\n      }\n\n      if (!this.todayElement.classList.contains(DISABLED)) {\n        EventHandler.add(this.todayElement, 'click', this.todayButtonClick, this);\n      }\n    }\n  };\n\n  CalendarBase.prototype.wireEvents = function (id, ref, keyConfig, moduleName) {\n    EventHandler.add(this.headerTitleElement, 'click', this.navigateTitle, this);\n    this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);\n\n    if (this.getModuleName() === 'calendar') {\n      this.keyboardModule = new KeyboardEvents(this.element, {\n        eventName: 'keydown',\n        keyAction: this.keyActionHandle.bind(this),\n        keyConfigs: this.defaultKeyConfigs\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.calendarElement, {\n        eventName: 'keydown',\n        keyAction: this.keyActionHandle.bind(this),\n        keyConfigs: this.defaultKeyConfigs\n      });\n    }\n  };\n\n  CalendarBase.prototype.dateWireEvents = function (id, ref, keyConfig, moduleName) {\n    this.defaultKeyConfigs = this.getDefaultKeyConfig();\n    this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);\n    this.serverModuleName = moduleName;\n  };\n\n  CalendarBase.prototype.todayButtonClick = function (e, value, isCustomDate) {\n    if (this.showTodayButton) {\n      if (this.currentView() === this.depth) {\n        this.effect = '';\n      } else {\n        this.effect = 'e-zoomin';\n      }\n\n      if (this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n        this.navigateTo(this.depth, new Date(this.checkValue(value)), isCustomDate);\n      } else {\n        this.navigateTo('Month', new Date(this.checkValue(value)), isCustomDate);\n      }\n    }\n  };\n\n  CalendarBase.prototype.resetCalendar = function () {\n    this.calendarElement && detach(this.calendarElement);\n    this.tableBodyElement && detach(this.tableBodyElement);\n    this.table && detach(this.table);\n    this.tableHeadElement && detach(this.tableHeadElement);\n    this.nextIcon && detach(this.nextIcon);\n    this.previousIcon && detach(this.previousIcon);\n    this.footer && detach(this.footer);\n    this.todayElement = null;\n    this.renderDayCellArgs = null;\n    this.calendarElement = this.tableBodyElement = this.footer = this.tableHeadElement = this.nextIcon = this.previousIcon = this.table = null;\n  };\n\n  CalendarBase.prototype.keyActionHandle = function (e, value, multiSelection) {\n    var focusedDate = this.tableBodyElement.querySelector('tr td.e-focused-date');\n    var selectedDate;\n\n    if (multiSelection) {\n      if (!isNullOrUndefined(focusedDate) && +value === parseInt(focusedDate.getAttribute('id').split('_')[0], 10)) {\n        selectedDate = focusedDate;\n      } else {\n        selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\n      }\n    } else {\n      selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\n    }\n\n    var view = this.getViewNumber(this.currentView());\n    var depthValue = this.getViewNumber(this.depth);\n    var levelRestrict = view === depthValue && this.getViewNumber(this.start) >= depthValue;\n    this.effect = '';\n\n    switch (e.action) {\n      case 'moveLeft':\n        this.keyboardNavigate(-1, view, e, this.max, this.min);\n        e.preventDefault();\n        break;\n\n      case 'moveRight':\n        this.keyboardNavigate(1, view, e, this.max, this.min);\n        e.preventDefault();\n        break;\n\n      case 'moveUp':\n        if (view === 0) {\n          this.keyboardNavigate(-7, view, e, this.max, this.min); // move the current date to the previous seven days.\n        } else {\n          this.keyboardNavigate(-4, view, e, this.max, this.min); // move the current year to the previous four days.\n        }\n\n        e.preventDefault();\n        break;\n\n      case 'moveDown':\n        if (view === 0) {\n          this.keyboardNavigate(7, view, e, this.max, this.min);\n        } else {\n          this.keyboardNavigate(4, view, e, this.max, this.min);\n        }\n\n        e.preventDefault();\n        break;\n\n      case 'select':\n        if (e.target === this.todayElement) {\n          this.todayButtonClick(e, value);\n        } else {\n          var element = !isNullOrUndefined(focusedDate) ? focusedDate : selectedDate;\n\n          if (!isNullOrUndefined(element) && !element.classList.contains(DISABLED)) {\n            if (levelRestrict) {\n              // eslint-disable-next-line radix\n              var d = new Date(parseInt('' + element.id, 0));\n              this.selectDate(e, d, element);\n            } else {\n              this.contentClick(null, --view, element, value);\n            }\n          }\n        }\n\n        break;\n\n      case 'controlUp':\n        this.title();\n        e.preventDefault();\n        break;\n\n      case 'controlDown':\n        if (!isNullOrUndefined(focusedDate) || !isNullOrUndefined(selectedDate) && !levelRestrict) {\n          this.contentClick(null, --view, focusedDate || selectedDate, value);\n        }\n\n        e.preventDefault();\n        break;\n\n      case 'home':\n        this.currentDate = this.firstDay(this.currentDate);\n        detach(this.tableBodyElement);\n\n        if (view === 0) {\n          this.renderMonths(e);\n        } else if (view === 1) {\n          this.renderYears(e);\n        } else {\n          this.renderDecades(e);\n        }\n\n        e.preventDefault();\n        break;\n\n      case 'end':\n        this.currentDate = this.lastDay(this.currentDate, view);\n        detach(this.tableBodyElement);\n\n        if (view === 0) {\n          this.renderMonths(e);\n        } else if (view === 1) {\n          this.renderYears(e);\n        } else {\n          this.renderDecades(e);\n        }\n\n        e.preventDefault();\n        break;\n\n      case 'pageUp':\n        this.addMonths(this.currentDate, -1);\n        this.navigateTo('Month', this.currentDate);\n        e.preventDefault();\n        break;\n\n      case 'pageDown':\n        this.addMonths(this.currentDate, 1);\n        this.navigateTo('Month', this.currentDate);\n        e.preventDefault();\n        break;\n\n      case 'shiftPageUp':\n        this.addYears(this.currentDate, -1);\n        this.navigateTo('Month', this.currentDate);\n        e.preventDefault();\n        break;\n\n      case 'shiftPageDown':\n        this.addYears(this.currentDate, 1);\n        this.navigateTo('Month', this.currentDate);\n        e.preventDefault();\n        break;\n\n      case 'controlHome':\n        this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 0, 1));\n        e.preventDefault();\n        break;\n\n      case 'controlEnd':\n        this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 11, 31));\n        e.preventDefault();\n        break;\n    }\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n\n  CalendarBase.prototype.keyboardNavigate = function (number, currentView, e, max, min) {\n    var date = new Date(this.checkValue(this.currentDate));\n\n    switch (currentView) {\n      case 2:\n        this.addYears(this.currentDate, number);\n\n        if (this.isMonthYearRange(this.currentDate)) {\n          detach(this.tableBodyElement);\n          this.renderDecades(e);\n        } else {\n          this.currentDate = date;\n        }\n\n        break;\n\n      case 1:\n        this.addMonths(this.currentDate, number);\n\n        if (this.calendarMode === 'Gregorian') {\n          if (this.isMonthYearRange(this.currentDate)) {\n            detach(this.tableBodyElement);\n            this.renderYears(e);\n          } else {\n            this.currentDate = date;\n          }\n        } else {\n          if (this.isMonthYearRange(this.currentDate)) {\n            detach(this.tableBodyElement);\n            this.renderYears(e);\n          } else {\n            this.currentDate = date;\n          }\n        }\n\n        break;\n\n      case 0:\n        this.addDay(this.currentDate, number, e, max, min);\n\n        if (this.isMinMaxRange(this.currentDate)) {\n          detach(this.tableBodyElement);\n          this.renderMonths(e);\n        } else {\n          this.currentDate = date;\n        }\n\n        break;\n    }\n  };\n  /**\n   * Initialize the event handler\n   *\n   * @param {Date} value - Specifies value of date.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CalendarBase.prototype.preRender = function (value) {\n    var _this = this;\n\n    this.navigatePreviousHandler = this.navigatePrevious.bind(this);\n    this.navigateNextHandler = this.navigateNext.bind(this);\n    this.defaultKeyConfigs = this.getDefaultKeyConfig();\n\n    this.navigateHandler = function (e) {\n      _this.triggerNavigate(e);\n    };\n  };\n\n  CalendarBase.prototype.minMaxDate = function (localDate) {\n    var currentDate = new Date(new Date(+localDate).setHours(0, 0, 0, 0));\n    var minDate = new Date(new Date(+this.min).setHours(0, 0, 0, 0));\n    var maxDate = new Date(new Date(+this.max).setHours(0, 0, 0, 0));\n\n    if (+currentDate === +minDate || +currentDate === +maxDate) {\n      if (+localDate < +this.min) {\n        localDate = new Date(+this.min);\n      }\n\n      if (+localDate > +this.max) {\n        localDate = new Date(+this.max);\n      }\n    }\n\n    return localDate;\n  };\n\n  CalendarBase.prototype.renderMonths = function (e, value, isCustomDate) {\n    var numCells = this.weekNumber ? 8 : 7;\n    var tdEles;\n\n    if (this.calendarMode === 'Gregorian') {\n      tdEles = this.renderDays(this.currentDate, value, null, null, isCustomDate, e);\n    } else {\n      tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\n    }\n\n    this.createContentHeader();\n\n    if (this.calendarMode === 'Gregorian') {\n      this.renderTemplate(tdEles, numCells, MONTH, e, value);\n    } else {\n      this.islamicModule.islamicRenderTemplate(tdEles, numCells, MONTH, e, value);\n    }\n  };\n\n  CalendarBase.prototype.renderDays = function (currentDate, value, multiSelection, values, isTodayDate, e) {\n    var tdEles = [];\n    var cellsCount = 42;\n    var todayDate = isTodayDate ? new Date(+currentDate) : this.getDate(new Date(), this.timezone);\n    var localDate = new Date(this.checkValue(currentDate));\n    var minMaxDate;\n    var currentMonth = localDate.getMonth();\n    this.titleUpdate(currentDate, 'days');\n    var d = localDate;\n    localDate = new Date(d.getFullYear(), d.getMonth(), 0, d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds());\n\n    while (localDate.getDay() !== this.firstDayOfWeek) {\n      this.setStartDate(localDate, -1 * dayMilliSeconds);\n    }\n\n    for (var day = 0; day < cellsCount; ++day) {\n      var weekEle = this.createElement('td', {\n        className: CELL\n      });\n      var weekAnchor = this.createElement('span');\n\n      if (day % 7 === 0 && this.weekNumber) {\n        // 6 days are added to get Last day of the week and 3 days are added to get middle day of the week.\n        var numberOfDays = this.weekRule === 'FirstDay' ? 6 : this.weekRule === 'FirstFourDayWeek' ? 3 : 0;\n        var finalDate = new Date(localDate.getFullYear(), localDate.getMonth(), localDate.getDate() + numberOfDays);\n        weekAnchor.textContent = '' + this.getWeek(finalDate);\n        weekEle.appendChild(weekAnchor);\n        addClass([weekEle], '' + WEEKNUMBER);\n        tdEles.push(weekEle);\n      }\n\n      minMaxDate = new Date(+localDate);\n      localDate = this.minMaxDate(localDate);\n      var dateFormatOptions = {\n        type: 'dateTime',\n        skeleton: 'full'\n      };\n      var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\n      var tdEle = this.dayCell(localDate);\n      var title = this.globalize.formatDate(localDate, {\n        type: 'date',\n        skeleton: 'full'\n      });\n      var dayLink = this.createElement('span');\n      dayLink.textContent = this.globalize.formatDate(localDate, {\n        format: 'd',\n        type: 'date',\n        skeleton: 'yMd'\n      });\n      var disabled = this.min > localDate || this.max < localDate;\n\n      if (disabled) {\n        addClass([tdEle], DISABLED);\n        addClass([tdEle], OVERLAY);\n      } else {\n        dayLink.setAttribute('title', '' + title);\n      }\n\n      if (currentMonth !== localDate.getMonth()) {\n        addClass([tdEle], OTHERMONTH);\n      }\n\n      if (localDate.getDay() === 0 || localDate.getDay() === 6) {\n        addClass([tdEle], WEEKEND);\n      }\n\n      tdEle.appendChild(dayLink);\n      this.renderDayCellArgs = {\n        date: localDate,\n        isDisabled: false,\n        element: tdEle,\n        isOutOfRange: disabled\n      };\n      var argument = this.renderDayCellArgs;\n      this.renderDayCellEvent(argument);\n\n      if (argument.isDisabled) {\n        var selectDate = new Date(this.checkValue(value));\n        var argsDate = new Date(this.checkValue(argument.date));\n\n        if (multiSelection) {\n          if (!isNullOrUndefined(values) && values.length > 0) {\n            for (var index = 0; index < values.length; index++) {\n              var localDateString = +new Date(this.globalize.formatDate(argument.date, {\n                type: 'date',\n                skeleton: 'yMd'\n              }));\n              var tempDateString = +new Date(this.globalize.formatDate(values[index], {\n                type: 'date',\n                skeleton: 'yMd'\n              }));\n\n              if (localDateString === tempDateString) {\n                values.splice(index, 1);\n                index = -1;\n              }\n            }\n          }\n        } else if (selectDate && +selectDate === +argsDate) {\n          this.setProperties({\n            value: null\n          }, true);\n        }\n      }\n\n      if (this.renderDayCellArgs.isDisabled && !tdEle.classList.contains(SELECTED)) {\n        addClass([tdEle], DISABLED);\n        addClass([tdEle], OVERLAY);\n\n        if (+this.renderDayCellArgs.date === +this.todayDate) {\n          this.todayDisabled = true;\n        }\n      }\n\n      var otherMnthBool = tdEle.classList.contains(OTHERMONTH);\n      var disabledCls = tdEle.classList.contains(DISABLED);\n\n      if (!disabledCls) {\n        EventHandler.add(tdEle, 'click', this.clickHandler, this);\n      } // to set the value as null while setting the disabled date onProperty change.\n      // if (args.isDisabled && +this.value === +args.date) {\n      //     this.setProperties({ value: null }, true);\n      // }\n\n\n      var currentTarget = void 0;\n\n      if (!isNullOrUndefined(e) && e.type == 'click') {\n        currentTarget = e.currentTarget;\n      }\n\n      if (multiSelection && !isNullOrUndefined(values) && !disabledCls) {\n        for (var tempValue = 0; tempValue < values.length; tempValue++) {\n          var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n          var formatOptions = {\n            format: null,\n            type: 'date',\n            skeleton: 'short',\n            calendar: type\n          };\n          var localDateString = this.globalize.formatDate(localDate, formatOptions);\n          var tempDateString = this.globalize.formatDate(values[tempValue], formatOptions);\n\n          if (localDateString === tempDateString && this.getDateVal(localDate, values[tempValue]) || this.getDateVal(localDate, value)) {\n            addClass([tdEle], SELECTED);\n          }\n\n          if (!isNullOrUndefined(currentTarget) && currentTarget.innerText === tdEle.innerText && this.previousDates && currentTarget.classList.contains(SELECTED)) {\n            removeClass([tdEle], SELECTED);\n            this.previousDates = false;\n            var copyValues = this.copyValues(values);\n\n            for (var i = 0; i < copyValues.length; i++) {\n              var type_1 = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n              var formatOptions_1 = {\n                format: null,\n                type: 'date',\n                skeleton: 'short',\n                calendar: type_1\n              };\n              var localDateString_1 = this.globalize.formatDate(date, formatOptions_1);\n              var tempDateString_1 = this.globalize.formatDate(copyValues[i], formatOptions_1);\n\n              if (localDateString_1 === tempDateString_1) {\n                var index = copyValues.indexOf(copyValues[i]);\n                copyValues.splice(index, 1);\n              }\n            }\n\n            this.setProperties({\n              values: copyValues\n            }, true);\n          } else {\n            this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n          }\n        }\n\n        if (values.length <= 0) {\n          this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n        }\n      } else if (!disabledCls && this.getDateVal(localDate, value)) {\n        addClass([tdEle], SELECTED);\n      }\n\n      this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n\n      if (date.getFullYear() === todayDate.getFullYear() && date.getMonth() === todayDate.getMonth() && date.getDate() === todayDate.getDate()) {\n        addClass([tdEle], TODAY);\n      }\n\n      tdEles.push(this.renderDayCellArgs.element);\n      localDate = new Date(+minMaxDate);\n      this.addDay(localDate, 1, null, this.max, this.min);\n    }\n\n    return tdEles;\n  };\n\n  CalendarBase.prototype.updateFocus = function (otherMonth, disabled, localDate, tableElement, currentDate) {\n    if (currentDate.getDate() === localDate.getDate() && !otherMonth && !disabled) {\n      addClass([tableElement], FOCUSEDDATE);\n    } else {\n      // eslint-disable-next-line radix\n      if (currentDate >= this.max && parseInt(tableElement.id, 0) === +this.max && !otherMonth && !disabled) {\n        addClass([tableElement], FOCUSEDDATE);\n      } // eslint-disable-next-line radix\n\n\n      if (currentDate <= this.min && parseInt(tableElement.id, 0) === +this.min && !otherMonth && !disabled) {\n        addClass([tableElement], FOCUSEDDATE);\n      }\n    }\n  };\n\n  CalendarBase.prototype.renderYears = function (e, value) {\n    this.removeTableHeadElement();\n    var numCells = 4;\n    var tdEles = [];\n    var valueUtil = isNullOrUndefined(value);\n    var curDate = new Date(this.checkValue(this.currentDate));\n    var mon = curDate.getMonth();\n    var yr = curDate.getFullYear();\n    var localDate = curDate;\n    var curYrs = localDate.getFullYear();\n    var minYr = new Date(this.checkValue(this.min)).getFullYear();\n    var minMonth = new Date(this.checkValue(this.min)).getMonth();\n    var maxYr = new Date(this.checkValue(this.max)).getFullYear();\n    var maxMonth = new Date(this.checkValue(this.max)).getMonth();\n    localDate.setMonth(0);\n    this.titleUpdate(this.currentDate, 'months');\n    localDate.setDate(1);\n\n    for (var month = 0; month < 12; ++month) {\n      var tdEle = this.dayCell(localDate);\n      var dayLink = this.createElement('span');\n      var localMonth = value && value.getMonth() === localDate.getMonth();\n      var select = value && value.getFullYear() === yr && localMonth;\n      dayLink.textContent = this.toCapitalize(this.globalize.formatDate(localDate, {\n        format: null,\n        type: 'dateTime',\n        skeleton: 'MMM'\n      }));\n\n      if (this.min && (curYrs < minYr || month < minMonth && curYrs === minYr) || this.max && (curYrs > maxYr || month > maxMonth && curYrs >= maxYr)) {\n        addClass([tdEle], DISABLED);\n      } else if (!valueUtil && select) {\n        addClass([tdEle], SELECTED);\n      } else {\n        if (localDate.getMonth() === mon && this.currentDate.getMonth() === mon) {\n          addClass([tdEle], FOCUSEDDATE);\n        }\n      }\n\n      localDate.setDate(1);\n      localDate.setMonth(localDate.getMonth() + 1);\n\n      if (!tdEle.classList.contains(DISABLED)) {\n        EventHandler.add(tdEle, 'click', this.clickHandler, this);\n      }\n\n      tdEle.appendChild(dayLink);\n      tdEles.push(tdEle);\n    }\n\n    this.renderTemplate(tdEles, numCells, YEAR, e, value);\n  };\n\n  CalendarBase.prototype.renderDecades = function (e, value) {\n    this.removeTableHeadElement();\n    var numCells = 4;\n    var yearCell = 12;\n    var tdEles = [];\n    var localDate = new Date(this.checkValue(this.currentDate));\n    localDate.setMonth(0);\n    localDate.setDate(1);\n    var localYr = localDate.getFullYear();\n    var startYr = new Date(localDate.setFullYear(localYr - localYr % 10));\n    var endYr = new Date(localDate.setFullYear(localYr - localYr % 10 + (10 - 1)));\n    var startFullYr = startYr.getFullYear();\n    var endFullYr = endYr.getFullYear();\n    var startHdrYr = this.globalize.formatDate(startYr, {\n      format: null,\n      type: 'dateTime',\n      skeleton: 'y'\n    });\n    var endHdrYr = this.globalize.formatDate(endYr, {\n      format: null,\n      type: 'dateTime',\n      skeleton: 'y'\n    });\n    this.headerTitleElement.textContent = startHdrYr + ' - ' + endHdrYr;\n    var start = new Date(localYr - localYr % 10 - 1, 0, 1);\n    var startYear = start.getFullYear();\n\n    for (var rowIterator = 0; rowIterator < yearCell; ++rowIterator) {\n      var year = startYear + rowIterator;\n      localDate.setFullYear(year);\n      var tdEle = this.dayCell(localDate);\n      var dayLink = this.createElement('span');\n      dayLink.textContent = this.globalize.formatDate(localDate, {\n        format: null,\n        type: 'dateTime',\n        skeleton: 'y'\n      });\n\n      if (year < startFullYr || year > endFullYr) {\n        addClass([tdEle], OTHERDECADE);\n\n        if (!isNullOrUndefined(value) && localDate.getFullYear() === value.getFullYear()) {\n          addClass([tdEle], SELECTED);\n        }\n\n        if (year < new Date(this.checkValue(this.min)).getFullYear() || year > new Date(this.checkValue(this.max)).getFullYear()) {\n          addClass([tdEle], DISABLED);\n        }\n      } else if (year < new Date(this.checkValue(this.min)).getFullYear() || year > new Date(this.checkValue(this.max)).getFullYear()) {\n        addClass([tdEle], DISABLED);\n      } else if (!isNullOrUndefined(value) && localDate.getFullYear() === value.getFullYear()) {\n        addClass([tdEle], SELECTED);\n      } else {\n        if (localDate.getFullYear() === this.currentDate.getFullYear() && !tdEle.classList.contains(DISABLED)) {\n          addClass([tdEle], FOCUSEDDATE);\n        }\n      }\n\n      if (!tdEle.classList.contains(DISABLED)) {\n        EventHandler.add(tdEle, 'click', this.clickHandler, this);\n      }\n\n      tdEle.appendChild(dayLink);\n      tdEles.push(tdEle);\n    }\n\n    this.renderTemplate(tdEles, numCells, 'e-decade', e, value);\n  };\n\n  CalendarBase.prototype.dayCell = function (localDate) {\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n    var dateFormatOptions = {\n      skeleton: 'full',\n      type: 'dateTime',\n      calendar: type\n    };\n    var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\n    var value = date.valueOf();\n    var attrs = {\n      className: CELL,\n      attrs: {\n        'id': '' + getUniqueID('' + value),\n        'aria-selected': 'false'\n      }\n    };\n    return this.createElement('td', attrs);\n  };\n\n  CalendarBase.prototype.firstDay = function (date) {\n    var collection = this.currentView() !== 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '') : this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '');\n\n    if (collection.length) {\n      for (var i = 0; i < collection.length; i++) {\n        if (!collection[i].classList.contains(DISABLED)) {\n          // eslint-disable-next-line radix\n          date = new Date(parseInt(collection[i].id, 0));\n          break;\n        }\n      }\n    }\n\n    return date;\n  };\n\n  CalendarBase.prototype.lastDay = function (date, view) {\n    var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n\n    if (view !== 2) {\n      var timeOffset = Math.abs(lastDate.getTimezoneOffset() - this.firstDay(date).getTimezoneOffset());\n\n      if (timeOffset) {\n        lastDate.setHours(this.firstDay(date).getHours() + timeOffset / 60);\n      }\n\n      return this.findLastDay(lastDate);\n    } else {\n      return this.findLastDay(this.firstDay(lastDate));\n    }\n  };\n\n  CalendarBase.prototype.checkDateValue = function (value) {\n    return !isNullOrUndefined(value) && value instanceof Date && !isNaN(+value) ? value : null;\n  };\n\n  CalendarBase.prototype.findLastDay = function (date) {\n    var collection = this.currentView() === 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '') : this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '');\n\n    if (collection.length) {\n      for (var i = collection.length - 1; i >= 0; i--) {\n        if (!collection[i].classList.contains(DISABLED)) {\n          // eslint-disable-next-line radix\n          date = new Date(parseInt(collection[i].id, 0));\n          break;\n        }\n      }\n    }\n\n    return date;\n  };\n\n  CalendarBase.prototype.removeTableHeadElement = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.element.querySelectorAll('.e-content table thead')[0])) {\n        detach(this.tableHeadElement);\n      }\n    } else {\n      if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content table thead')[0])) {\n        detach(this.tableHeadElement);\n      }\n    }\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CalendarBase.prototype.renderTemplate = function (elements, count, classNm, e, value) {\n    var view = this.getViewNumber(this.currentView());\n    var trEle;\n    this.tableBodyElement = this.createElement('tbody');\n    this.table.appendChild(this.tableBodyElement);\n    removeClass([this.contentElement, this.headerElement], [MONTH, DECADE, YEAR]);\n    addClass([this.contentElement, this.headerElement], [classNm]);\n    var weekNumCell = 41;\n    var numberCell = 35;\n    var otherMonthCell = 6;\n    var row = count;\n    var rowIterator = 0;\n\n    for (var dayCell = 0; dayCell < elements.length / count; ++dayCell) {\n      trEle = this.createElement('tr');\n\n      for (rowIterator = 0 + rowIterator; rowIterator < row; rowIterator++) {\n        if (!elements[rowIterator].classList.contains('e-week-number') && !isNullOrUndefined(elements[rowIterator].children[0])) {\n          addClass([elements[rowIterator].children[0]], [LINK]);\n          rippleEffect(elements[rowIterator].children[0], {\n            duration: 600,\n            isCenterRipple: true\n          });\n        }\n\n        trEle.appendChild(elements[rowIterator]);\n\n        if (this.weekNumber && rowIterator === otherMonthCell + 1 && elements[otherMonthCell + 1].classList.contains(OTHERMONTH)) {\n          addClass([trEle], OTHERMONTHROW);\n        }\n\n        if (!this.weekNumber && rowIterator === otherMonthCell && elements[otherMonthCell].classList.contains(OTHERMONTH)) {\n          addClass([trEle], OTHERMONTHROW);\n        }\n\n        if (this.weekNumber) {\n          if (rowIterator === weekNumCell && elements[weekNumCell].classList.contains(OTHERMONTH)) {\n            addClass([trEle], OTHERMONTHROW);\n          }\n        } else {\n          if (rowIterator === numberCell && elements[numberCell].classList.contains(OTHERMONTH)) {\n            addClass([trEle], OTHERMONTHROW);\n          }\n        }\n      }\n\n      row = row + count;\n      rowIterator = rowIterator + 0;\n      this.tableBodyElement.appendChild(trEle);\n    }\n\n    this.table.querySelector('tbody').className = this.effect;\n\n    if (this.calendarMode === 'Gregorian') {\n      this.iconHandler();\n    } else {\n      this.islamicModule.islamicIconHandler();\n    }\n\n    if (view !== this.getViewNumber(this.currentView()) || view === 0 && view !== this.getViewNumber(this.currentView())) {\n      this.navigateHandler(e);\n    }\n\n    this.setAriaActiveDescendant();\n  };\n\n  CalendarBase.prototype.clickHandler = function (e, value) {\n    this.clickEventEmitter(e);\n    var eve = e.currentTarget;\n    var view = this.getViewNumber(this.currentView());\n\n    if (eve.classList.contains(OTHERMONTH)) {\n      this.contentClick(e, 0, null, value);\n    } else if (view === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n      this.contentClick(e, 1, null, value);\n    } else if (2 === view) {\n      this.contentClick(e, 1, null, value);\n    } else if (!eve.classList.contains(OTHERMONTH) && view === 0) {\n      this.selectDate(e, this.getIdValue(e, null), null);\n    } else {\n      this.contentClick(e, 0, eve, value);\n    }\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  }; // Content click event handler required for extended components\n\n\n  CalendarBase.prototype.clickEventEmitter = function (e) {\n    e.preventDefault();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CalendarBase.prototype.contentClick = function (e, view, element, value) {\n    var currentView = this.getViewNumber(this.currentView());\n    var d = this.getIdValue(e, element);\n\n    switch (view) {\n      case 0:\n        if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n          detach(this.tableBodyElement);\n          this.currentDate = d;\n          this.effect = ZOOMIN;\n          this.renderMonths(e);\n        } else {\n          if (this.calendarMode === 'Gregorian') {\n            this.currentDate.setMonth(d.getMonth());\n\n            if (d.getMonth() > 0 && this.currentDate.getMonth() !== d.getMonth()) {\n              this.currentDate.setDate(0);\n            }\n\n            this.currentDate.setFullYear(d.getFullYear());\n          } else {\n            this.currentDate = d;\n          }\n\n          this.effect = ZOOMIN;\n          detach(this.tableBodyElement);\n          this.renderMonths(e);\n        }\n\n        break;\n\n      case 1:\n        if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n          this.selectDate(e, d, null);\n        } else {\n          if (this.calendarMode === 'Gregorian') {\n            this.currentDate.setFullYear(d.getFullYear());\n          } else {\n            this.islamicPreviousHeader = this.headerElement.textContent;\n            var islamicDate = this.islamicModule.getIslamicDate(d);\n            this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month, 1);\n          }\n\n          this.effect = ZOOMIN;\n          detach(this.tableBodyElement);\n          this.renderYears(e);\n        }\n\n    }\n  };\n\n  CalendarBase.prototype.switchView = function (view, e, multiSelection, isCustomDate) {\n    switch (view) {\n      case 0:\n        detach(this.tableBodyElement);\n        this.renderMonths(e, null, isCustomDate);\n\n        if (multiSelection && !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0])) {\n          this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\n        }\n\n        break;\n\n      case 1:\n        detach(this.tableBodyElement);\n        this.renderYears(e);\n        break;\n\n      case 2:\n        detach(this.tableBodyElement);\n        this.renderDecades(e);\n    }\n  };\n  /**\n   * To get component name\n   *\n   * @returns {string} Returns the component name.\n   * @private\n   */\n\n\n  CalendarBase.prototype.getModuleName = function () {\n    return 'calendar';\n  };\n  /**\n   *\n   * @returns {void}\n    */\n\n\n  CalendarBase.prototype.requiredModules = function () {\n    var modules = [];\n\n    if (this) {\n      modules.push({\n        args: [this],\n        member: 'islamic'\n      });\n    }\n\n    return modules;\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the properties to be maintained upon browser refresh.\n   *\n   * @returns {string}\n   */\n\n\n  CalendarBase.prototype.getPersistData = function () {\n    var keyEntity = ['value'];\n    return this.addOnPersist(keyEntity);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {CalendarBaseModel} newProp - Returns the dynamic property value of the component.\n   * @param {CalendarBaseModel} oldProp - Returns the previous property value of the component.\n   * @param {boolean} multiSelection - - Specifies whether multiple date selection is enabled or not.\n   * @param {Date[]} values - Specifies the dates.\n   * @returns {void}\n   * @private\n   */\n\n\n  CalendarBase.prototype.onPropertyChanged = function (newProp, oldProp, multiSelection, values) {\n    this.effect = '';\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            if (this.getModuleName() === 'calendar') {\n              this.element.classList.add('e-rtl');\n            } else {\n              this.calendarElement.classList.add('e-rtl');\n            }\n          } else {\n            if (this.getModuleName() === 'calendar') {\n              this.element.classList.remove('e-rtl');\n            } else {\n              this.calendarElement.classList.remove('e-rtl');\n            }\n          }\n\n          break;\n\n        case 'dayHeaderFormat':\n          this.getCultureValues();\n\n          if (this.getModuleName() !== 'datepicker') {\n            this.createContentHeader();\n          } else if (this.calendarElement) {\n            this.createContentHeader();\n          }\n\n          this.adjustLongHeaderSize();\n          break;\n\n        case 'min':\n        case 'max':\n          this.rangeValidation(this.min, this.max);\n\n          if (prop === 'min') {\n            this.setProperties({\n              min: this.checkDateValue(new Date(this.checkValue(newProp.min)))\n            }, true);\n          } else {\n            this.setProperties({\n              max: this.checkDateValue(new Date(this.checkValue(newProp.max)))\n            }, true);\n          }\n\n          this.setProperties({\n            start: this.currentView()\n          }, true);\n\n          if (this.tableBodyElement) {\n            detach(this.tableBodyElement);\n          }\n\n          this.minMaxUpdate();\n\n          if (multiSelection) {\n            this.validateValues(multiSelection, values);\n          }\n\n          if (this.getModuleName() !== 'datepicker') {\n            this.createContentBody();\n          } else if (this.calendarElement) {\n            this.createContentBody();\n          }\n\n          if ((this.todayDate < this.min || this.max < this.todayDate) && this.footer && this.todayElement) {\n            detach(this.todayElement);\n            detach(this.footer);\n            this.todayElement = this.footer = null;\n            this.createContentFooter();\n          } else {\n            if (this.footer && this.todayElement && this.todayElement.classList.contains('e-disabled')) {\n              removeClass([this.todayElement], DISABLED);\n              detach(this.todayElement);\n              detach(this.footer);\n              this.todayElement = this.footer = null;\n              this.createContentFooter();\n            }\n          }\n\n          break;\n\n        case 'start':\n        case 'depth':\n        case 'weekNumber':\n        case 'firstDayOfWeek':\n        case 'weekRule':\n          this.checkView();\n\n          if (this.getModuleName() !== 'datepicker') {\n            this.createContentHeader();\n            this.createContentBody();\n          } else if (this.calendarElement) {\n            this.createContentHeader();\n            this.createContentBody();\n          }\n\n          break;\n\n        case 'locale':\n          this.globalize = new Internationalization(this.locale);\n\n          if (this.getModuleName() !== 'datepicker') {\n            this.createContentHeader();\n            this.createContentBody();\n          } else if (this.calendarElement) {\n            this.createContentHeader();\n            this.createContentBody();\n          }\n\n          this.l10.setLocale(this.locale);\n          this.updateFooter();\n          break;\n\n        case 'showTodayButton':\n          if (newProp.showTodayButton) {\n            this.createContentFooter();\n          } else {\n            if (!isNullOrUndefined(this.todayElement) && !isNullOrUndefined(this.footer)) {\n              detach(this.todayElement);\n              detach(this.footer);\n              this.todayElement = this.footer = undefined;\n            }\n          }\n\n          this.setProperties({\n            showTodayButton: newProp.showTodayButton\n          }, true);\n          break;\n      }\n    }\n  };\n  /**\n   * values property updated with considered disabled dates of the calendar.\n   *\n   * @param {boolean} multiSelection - Specifies whether multiple date selection is enabled.\n   * @param {Date[]} values - Specifies the dates to validate.\n   * @returns {void}\n   */\n\n\n  CalendarBase.prototype.validateValues = function (multiSelection, values) {\n    if (multiSelection && !isNullOrUndefined(values) && values.length > 0) {\n      var copyValues = this.copyValues(values);\n\n      for (var skipIndex = 0; skipIndex < copyValues.length; skipIndex++) {\n        var tempValue = copyValues[skipIndex];\n        var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n        var tempValueString = void 0;\n\n        if (this.calendarMode === 'Gregorian') {\n          tempValueString = this.globalize.formatDate(tempValue, {\n            type: 'date',\n            skeleton: 'yMd'\n          });\n        } else {\n          tempValueString = this.globalize.formatDate(tempValue, {\n            type: 'dateTime',\n            skeleton: 'full',\n            calendar: 'islamic'\n          });\n        }\n\n        var minFormatOption = {\n          type: 'date',\n          skeleton: 'yMd',\n          calendar: type\n        };\n        var minStringValue = this.globalize.formatDate(this.min, minFormatOption);\n        var minString = minStringValue;\n        var maxFormatOption = {\n          type: 'date',\n          skeleton: 'yMd',\n          calendar: type\n        };\n        var maxStringValue = this.globalize.formatDate(this.max, maxFormatOption);\n        var maxString = maxStringValue;\n\n        if (+new Date(tempValueString) < +new Date(minString) || +new Date(tempValueString) > +new Date(maxString)) {\n          copyValues.splice(skipIndex, 1);\n          skipIndex = -1;\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, true);\n    }\n  };\n\n  CalendarBase.prototype.setValueUpdate = function () {\n    if (!isNullOrUndefined(this.tableBodyElement)) {\n      detach(this.tableBodyElement);\n      this.setProperties({\n        start: this.currentView()\n      }, true);\n      this.createContentBody();\n    }\n  };\n\n  CalendarBase.prototype.copyValues = function (values) {\n    var copyValues = [];\n\n    if (!isNullOrUndefined(values) && values.length > 0) {\n      for (var index = 0; index < values.length; index++) {\n        copyValues.push(new Date(+values[index]));\n      }\n    }\n\n    return copyValues;\n  };\n\n  CalendarBase.prototype.titleUpdate = function (date, view) {\n    var globalize = new Internationalization(this.locale);\n    var dayFormatOptions;\n    var monthFormatOptions;\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n\n    if (this.calendarMode === 'Gregorian') {\n      dayFormatOptions = globalize.formatDate(date, {\n        type: 'dateTime',\n        skeleton: 'yMMMM',\n        calendar: type\n      });\n      monthFormatOptions = globalize.formatDate(date, {\n        format: null,\n        type: 'dateTime',\n        skeleton: 'y',\n        calendar: type\n      });\n    } else {\n      dayFormatOptions = globalize.formatDate(date, {\n        type: 'dateTime',\n        format: 'MMMM y',\n        calendar: type\n      });\n      monthFormatOptions = globalize.formatDate(date, {\n        type: 'dateTime',\n        format: 'y',\n        calendar: type\n      });\n    }\n\n    switch (view) {\n      case 'days':\n        this.headerTitleElement.textContent = this.toCapitalize(dayFormatOptions);\n        break;\n\n      case 'months':\n        this.headerTitleElement.textContent = monthFormatOptions;\n    }\n  };\n\n  CalendarBase.prototype.setActiveDescendant = function () {\n    var id;\n    var focusedEle = this.tableBodyElement.querySelector('tr td.e-focused-date');\n    var selectedEle = this.tableBodyElement.querySelector('tr td.e-selected');\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n    var title;\n    var view = this.currentView();\n\n    if (view === 'Month') {\n      title = this.globalize.formatDate(this.currentDate, {\n        type: 'date',\n        skeleton: 'full',\n        calendar: type\n      });\n    } else if (view === 'Year') {\n      if (type !== 'islamic') {\n        title = this.globalize.formatDate(this.currentDate, {\n          type: 'date',\n          skeleton: 'yMMMM',\n          calendar: type\n        });\n      } else {\n        title = this.globalize.formatDate(this.currentDate, {\n          type: 'date',\n          skeleton: 'GyMMM',\n          calendar: type\n        });\n      }\n    } else {\n      title = this.globalize.formatDate(this.currentDate, {\n        format: null,\n        type: 'date',\n        skeleton: 'y',\n        calendar: type\n      });\n    }\n\n    if (selectedEle || focusedEle) {\n      if (!isNullOrUndefined(selectedEle)) {\n        selectedEle.setAttribute('aria-selected', 'true');\n      }\n\n      (focusedEle || selectedEle).setAttribute('aria-label', title);\n      id = (focusedEle || selectedEle).getAttribute('id');\n    }\n\n    return id;\n  };\n\n  CalendarBase.prototype.iconHandler = function () {\n    new Date(this.checkValue(this.currentDate)).setDate(1);\n\n    switch (this.currentView()) {\n      case 'Month':\n        this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n        this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n        break;\n\n      case 'Year':\n        this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n        this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n        break;\n\n      case 'Decade':\n        this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n        this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n    }\n  };\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  CalendarBase.prototype.destroy = function () {\n    if (this.getModuleName() === 'calendar' && this.element) {\n      removeClass([this.element], [ROOT]);\n    } else {\n      if (this.calendarElement && this.element) {\n        removeClass([this.element], [ROOT]);\n      }\n    }\n\n    if (this.getModuleName() === 'calendar' && this.element) {\n      EventHandler.remove(this.headerTitleElement, 'click', this.navigateTitle);\n\n      if (this.todayElement) {\n        EventHandler.remove(this.todayElement, 'click', this.todayButtonClick);\n      }\n\n      this.previousIconHandler(true);\n      this.nextIconHandler(true);\n      this.keyboardModule.destroy();\n      this.element.removeAttribute('data-role');\n\n      if (!isNullOrUndefined(this.calendarEleCopy.getAttribute('tabindex'))) {\n        this.element.setAttribute('tabindex', this.tabIndex);\n      } else {\n        this.element.removeAttribute('tabindex');\n      }\n    }\n\n    if (this.element) {\n      this.element.innerHTML = '';\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  CalendarBase.prototype.title = function (e) {\n    var currentView = this.getViewNumber(this.currentView());\n    this.effect = ZOOMIN;\n    this.switchView(++currentView, e);\n  };\n\n  CalendarBase.prototype.getViewNumber = function (stringVal) {\n    if (stringVal === 'Month') {\n      return 0;\n    } else if (stringVal === 'Year') {\n      return 1;\n    } else {\n      return 2;\n    }\n  };\n\n  CalendarBase.prototype.navigateTitle = function (e) {\n    e.preventDefault();\n    this.title(e);\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n\n  CalendarBase.prototype.previous = function () {\n    this.effect = '';\n    var currentView = this.getViewNumber(this.currentView());\n\n    switch (this.currentView()) {\n      case 'Month':\n        this.addMonths(this.currentDate, -1);\n        this.switchView(currentView);\n        break;\n\n      case 'Year':\n        this.addYears(this.currentDate, -1);\n        this.switchView(currentView);\n        break;\n\n      case 'Decade':\n        this.addYears(this.currentDate, -10);\n        this.switchView(currentView);\n        break;\n    }\n  };\n\n  CalendarBase.prototype.navigatePrevious = function (e) {\n    e.preventDefault();\n\n    if (this.calendarMode === 'Gregorian') {\n      this.previous();\n    } else {\n      this.islamicModule.islamicPrevious();\n    }\n\n    this.triggerNavigate(e);\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n\n  CalendarBase.prototype.next = function () {\n    this.effect = '';\n    var currentView = this.getViewNumber(this.currentView());\n\n    switch (this.currentView()) {\n      case 'Month':\n        this.addMonths(this.currentDate, 1);\n        this.switchView(currentView);\n        break;\n\n      case 'Year':\n        this.addYears(this.currentDate, 1);\n        this.switchView(currentView);\n        break;\n\n      case 'Decade':\n        this.addYears(this.currentDate, 10);\n        this.switchView(currentView);\n        break;\n    }\n  };\n\n  CalendarBase.prototype.navigateNext = function (eve) {\n    eve.preventDefault();\n\n    if (this.calendarMode === 'Gregorian') {\n      this.next();\n    } else {\n      this.islamicModule.islamicNext();\n    }\n\n    this.triggerNavigate(eve);\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n  /**\n   * This method is used to navigate to the month/year/decade view of the Calendar.\n   *\n   * @param {string} view - Specifies the view of the Calendar.\n   * @param {Date} date - Specifies the focused date in a view.\n   * @param {boolean} isCustomDate - Specifies whether the calendar is rendered with custom today date or not.\n   * @returns {void}\n   */\n\n\n  CalendarBase.prototype.navigateTo = function (view, date, isCustomDate) {\n    if (+date >= +this.min && +date <= +this.max) {\n      this.currentDate = date;\n    }\n\n    if (+date <= +this.min) {\n      this.currentDate = new Date(this.checkValue(this.min));\n    }\n\n    if (+date >= +this.max) {\n      this.currentDate = new Date(this.checkValue(this.max));\n    }\n\n    if (this.getViewNumber(this.depth) >= this.getViewNumber(view)) {\n      if (this.getViewNumber(this.depth) <= this.getViewNumber(this.start) || this.getViewNumber(this.depth) === this.getViewNumber(view)) {\n        view = this.depth;\n      }\n    }\n\n    this.switchView(this.getViewNumber(view), null, null, isCustomDate);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the current view of the Calendar.\n   *\n   * @returns {string}\n   */\n\n\n  CalendarBase.prototype.currentView = function () {\n    if (this.contentElement.classList.contains(YEAR)) {\n      return 'Year';\n    } else if (this.contentElement.classList.contains(DECADE)) {\n      return 'Decade';\n    } else {\n      return 'Month';\n    }\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n\n  CalendarBase.prototype.getDateVal = function (date, value) {\n    return !isNullOrUndefined(value) && date.getDate() === value.getDate() && date.getMonth() === value.getMonth() && date.getFullYear() === value.getFullYear();\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  CalendarBase.prototype.getCultureObjects = function (ld, c) {\n    var gregorianFormat = '.dates.calendars.gregorian.days.format.' + this.dayHeaderFormat.toLowerCase();\n    var islamicFormat = '.dates.calendars.islamic.days.format.' + this.dayHeaderFormat.toLowerCase();\n    var mainVal = 'main.';\n\n    if (this.calendarMode === 'Gregorian') {\n      return getValue(mainVal + '' + this.locale + gregorianFormat, ld);\n    } else {\n      return getValue('main.' + '' + this.locale + islamicFormat, ld);\n    }\n  };\n\n  CalendarBase.prototype.getWeek = function (d) {\n    var currentDate = new Date(this.checkValue(d)).valueOf();\n    var date = new Date(d.getFullYear(), 0, 1).valueOf();\n    return Math.ceil((currentDate - date + dayMilliSeconds) / dayMilliSeconds / 7);\n  };\n\n  CalendarBase.prototype.setStartDate = function (date, time) {\n    var tzOffset = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffset;\n    date.setTime(d.getTime() + tzOffsetDiff * minutesMilliSeconds);\n  };\n\n  CalendarBase.prototype.addMonths = function (date, i) {\n    if (this.calendarMode === 'Gregorian') {\n      var day = date.getDate();\n      date.setDate(1);\n      date.setMonth(date.getMonth() + i);\n      date.setDate(Math.min(day, this.getMaxDays(date)));\n    } else {\n      var islamicDate = this.islamicModule.getIslamicDate(date);\n      this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month + i, 1);\n    }\n  };\n\n  CalendarBase.prototype.addYears = function (date, i) {\n    if (this.calendarMode === 'Gregorian') {\n      var day = date.getDate();\n      date.setDate(1);\n      date.setFullYear(date.getFullYear() + i);\n      date.setDate(Math.min(day, this.getMaxDays(date)));\n    } else {\n      var islamicDate = this.islamicModule.getIslamicDate(date);\n      this.currentDate = this.islamicModule.toGregorian(islamicDate.year + i, islamicDate.month, 1);\n    }\n  };\n\n  CalendarBase.prototype.getIdValue = function (e, element) {\n    var eve;\n\n    if (e) {\n      eve = e.currentTarget;\n    } else {\n      eve = element;\n    }\n\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n    var dateFormatOptions = {\n      type: 'dateTime',\n      skeleton: 'full',\n      calendar: type\n    }; // eslint-disable-next-line radix\n\n    var dateString = this.globalize.formatDate(new Date(parseInt('' + eve.getAttribute('id'), 0)), dateFormatOptions);\n    var date = this.globalize.parseDate(dateString, dateFormatOptions);\n    var value = date.valueOf() - date.valueOf() % 1000;\n    return new Date(value); //return this.globalize.parseDate(dateString, dateFormatOptions);\n  };\n\n  CalendarBase.prototype.adjustLongHeaderSize = function () {\n    removeClass([this.element], DAYHEADERLONG);\n\n    if (this.dayHeaderFormat === 'Wide') {\n      addClass([this.getModuleName() === 'calendar' ? this.element : this.calendarElement], DAYHEADERLONG);\n    }\n  };\n\n  CalendarBase.prototype.selectDate = function (e, date, node, multiSelection, values) {\n    var element = node || e.currentTarget;\n    this.isDateSelected = false;\n\n    if (this.currentView() === 'Decade') {\n      this.setDateDecade(this.currentDate, date.getFullYear());\n    } else if (this.currentView() === 'Year') {\n      this.setDateYear(this.currentDate, date);\n    } else {\n      if (multiSelection && !this.checkPresentDate(date, values)) {\n        var copyValues = this.copyValues(values);\n\n        if (!isNullOrUndefined(values) && copyValues.length > 0) {\n          copyValues.push(new Date(this.checkValue(date)));\n          this.setProperties({\n            values: copyValues\n          }, true);\n          this.setProperties({\n            value: values[values.length - 1]\n          }, true);\n        } else {\n          this.setProperties({\n            values: [new Date(this.checkValue(date))]\n          }, true);\n        }\n      } else {\n        this.setProperties({\n          value: new Date(this.checkValue(date))\n        }, true);\n      }\n\n      this.currentDate = new Date(this.checkValue(date));\n    }\n\n    var tableBodyElement = closest(element, '.' + ROOT);\n\n    if (isNullOrUndefined(tableBodyElement)) {\n      tableBodyElement = this.tableBodyElement;\n    }\n\n    if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + SELECTED))) {\n      removeClass([tableBodyElement.querySelector('.' + SELECTED)], SELECTED);\n    }\n\n    if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + FOCUSEDDATE))) {\n      removeClass([tableBodyElement.querySelector('.' + FOCUSEDDATE)], FOCUSEDDATE);\n    }\n\n    if (multiSelection) {\n      var copyValues = this.copyValues(values);\n      var collection = Array.prototype.slice.call(this.tableBodyElement.querySelectorAll('td'));\n\n      for (var index = 0; index < collection.length; index++) {\n        var tempElement = tableBodyElement.querySelectorAll('td' + '.' + FOCUSEDDATE)[0];\n        var selectedElement = tableBodyElement.querySelectorAll('td' + '.' + SELECTED)[0];\n\n        if (collection[index] === tempElement) {\n          removeClass([collection[index]], FOCUSEDDATE);\n        }\n\n        if (collection[index] === selectedElement && !this.checkPresentDate(new Date(parseInt(selectedElement.getAttribute('id').split('_')[0], 10)), values)) {\n          removeClass([collection[index]], SELECTED);\n        }\n      }\n\n      if (element.classList.contains(SELECTED)) {\n        removeClass([element], SELECTED);\n\n        for (var i = 0; i < copyValues.length; i++) {\n          var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n          var formatOptions = {\n            format: null,\n            type: 'date',\n            skeleton: 'short',\n            calendar: type\n          };\n          var localDateString = this.globalize.formatDate(date, formatOptions);\n          var tempDateString = this.globalize.formatDate(copyValues[i], formatOptions);\n\n          if (localDateString === tempDateString) {\n            var index = copyValues.indexOf(copyValues[i]);\n            copyValues.splice(index, 1);\n            addClass([element], FOCUSEDDATE);\n          }\n        }\n\n        this.setProperties({\n          values: copyValues\n        }, true);\n      } else {\n        addClass([element], SELECTED);\n      }\n    } else {\n      addClass([element], SELECTED);\n    }\n\n    this.isDateSelected = true;\n  };\n\n  CalendarBase.prototype.checkPresentDate = function (dates, values) {\n    var previousValue = false;\n\n    if (!isNullOrUndefined(values)) {\n      for (var checkPrevious = 0; checkPrevious < values.length; checkPrevious++) {\n        var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n        var localDateString = this.globalize.formatDate(dates, {\n          format: null,\n          type: 'date',\n          skeleton: 'short',\n          calendar: type\n        });\n        var tempDateString = this.globalize.formatDate(values[checkPrevious], {\n          format: null,\n          type: 'date',\n          skeleton: 'short',\n          calendar: type\n        });\n\n        if (localDateString === tempDateString) {\n          previousValue = true;\n        }\n      }\n    }\n\n    return previousValue;\n  };\n\n  CalendarBase.prototype.setAriaActiveDescendant = function () {\n    attributes(this.table, {\n      'aria-activedescendant': '' + this.setActiveDescendant()\n    });\n  };\n\n  CalendarBase.prototype.previousIconHandler = function (disabled) {\n    if (disabled) {\n      EventHandler.remove(this.previousIcon, 'click', this.navigatePreviousHandler);\n      addClass([this.previousIcon], '' + DISABLED);\n      addClass([this.previousIcon], '' + OVERLAY);\n      this.previousIcon.setAttribute('aria-disabled', 'true');\n    } else {\n      EventHandler.add(this.previousIcon, 'click', this.navigatePreviousHandler);\n      removeClass([this.previousIcon], '' + DISABLED);\n      removeClass([this.previousIcon], '' + OVERLAY);\n      this.previousIcon.setAttribute('aria-disabled', 'false');\n    }\n  };\n\n  CalendarBase.prototype.renderDayCellEvent = function (args) {\n    extend(this.renderDayCellArgs, {\n      name: 'renderDayCell'\n    });\n    this.trigger('renderDayCell', args);\n  };\n\n  CalendarBase.prototype.navigatedEvent = function (eve) {\n    extend(this.navigatedArgs, {\n      name: 'navigated',\n      event: eve\n    });\n    this.trigger('navigated', this.navigatedArgs);\n  };\n\n  CalendarBase.prototype.triggerNavigate = function (event) {\n    this.navigatedArgs = {\n      view: this.currentView(),\n      date: this.currentDate\n    };\n    this.navigatedEvent(event);\n  };\n\n  CalendarBase.prototype.nextIconHandler = function (disabled) {\n    if (disabled) {\n      EventHandler.remove(this.nextIcon, 'click', this.navigateNextHandler);\n      addClass([this.nextIcon], DISABLED);\n      addClass([this.nextIcon], OVERLAY);\n      this.nextIcon.setAttribute('aria-disabled', 'true');\n    } else {\n      EventHandler.add(this.nextIcon, 'click', this.navigateNextHandler);\n      removeClass([this.nextIcon], DISABLED);\n      removeClass([this.nextIcon], OVERLAY);\n      this.nextIcon.setAttribute('aria-disabled', 'false');\n    }\n  };\n\n  CalendarBase.prototype.compare = function (startDate, endDate, modifier) {\n    var start = endDate.getFullYear();\n    var end;\n    var result;\n    end = start;\n    result = 0;\n\n    if (modifier) {\n      start = start - start % modifier;\n      end = start - start % modifier + modifier - 1;\n    }\n\n    if (startDate.getFullYear() > end) {\n      result = 1;\n    } else if (startDate.getFullYear() < start) {\n      result = -1;\n    }\n\n    return result;\n  };\n\n  CalendarBase.prototype.isMinMaxRange = function (date) {\n    return +date >= +this.min && +date <= +this.max;\n  };\n\n  CalendarBase.prototype.isMonthYearRange = function (date) {\n    if (this.calendarMode === 'Gregorian') {\n      return date.getMonth() >= this.min.getMonth() && date.getFullYear() >= this.min.getFullYear() && date.getMonth() <= this.max.getMonth() && date.getFullYear() <= this.max.getFullYear();\n    } else {\n      var islamicDate = this.islamicModule.getIslamicDate(date);\n      return islamicDate.month >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).month && islamicDate.year >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).year && islamicDate.month <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).month && islamicDate.year <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).year;\n    }\n  };\n\n  CalendarBase.prototype.compareYear = function (start, end) {\n    return this.compare(start, end, 0);\n  };\n\n  CalendarBase.prototype.compareDecade = function (start, end) {\n    return this.compare(start, end, 10);\n  };\n\n  CalendarBase.prototype.shiftArray = function (array, i) {\n    return array.slice(i).concat(array.slice(0, i));\n  };\n\n  CalendarBase.prototype.addDay = function (date, i, e, max, min) {\n    var column = i;\n    var value = new Date(+date);\n\n    if (!isNullOrUndefined(this.tableBodyElement) && !isNullOrUndefined(e)) {\n      while (this.findNextTD(new Date(+date), column, max, min)) {\n        column += i;\n      }\n\n      var rangeValue = new Date(value.setDate(value.getDate() + column));\n      column = +rangeValue > +max || +rangeValue < +min ? column === i ? i - i : i : column;\n    }\n\n    date.setDate(date.getDate() + column);\n  };\n\n  CalendarBase.prototype.findNextTD = function (date, column, max, min) {\n    var value = new Date(date.setDate(date.getDate() + column));\n    var collection = [];\n    var isDisabled = false;\n\n    if ((!isNullOrUndefined(value) && value.getMonth()) === (!isNullOrUndefined(this.currentDate) && this.currentDate.getMonth())) {\n      var tdEles = void 0;\n\n      if (this.calendarMode === 'Gregorian') {\n        tdEles = this.renderDays(value);\n      } else {\n        tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\n      }\n\n      collection = tdEles.filter(function (element) {\n        return element.classList.contains(DISABLED);\n      });\n    } else {\n      collection = this.tableBodyElement.querySelectorAll('td.' + DISABLED);\n    }\n\n    if (+value <= +max && +value >= +min) {\n      if (collection.length) {\n        for (var i = 0; i < collection.length; i++) {\n          // eslint-disable-next-line radix\n          isDisabled = +value === +new Date(parseInt(collection[i].id, 0)) ? true : false;\n\n          if (isDisabled) {\n            break;\n          }\n        }\n      }\n    }\n\n    return isDisabled;\n  };\n\n  CalendarBase.prototype.getMaxDays = function (d) {\n    var date;\n    var tmpDate = new Date(this.checkValue(d));\n    date = 28;\n    var month = tmpDate.getMonth();\n\n    while (tmpDate.getMonth() === month) {\n      ++date;\n      tmpDate.setDate(date);\n    }\n\n    return date - 1;\n  };\n\n  CalendarBase.prototype.setDateDecade = function (date, year) {\n    date.setFullYear(year);\n    this.setProperties({\n      value: new Date(this.checkValue(date))\n    }, true);\n  };\n\n  CalendarBase.prototype.setDateYear = function (date, value) {\n    date.setFullYear(value.getFullYear(), value.getMonth(), date.getDate());\n\n    if (value.getMonth() !== date.getMonth()) {\n      date.setDate(0);\n      this.currentDate = new Date(this.checkValue(value));\n    }\n\n    this.setProperties({\n      value: new Date(this.checkValue(date))\n    }, true);\n  };\n\n  CalendarBase.prototype.compareMonth = function (start, end) {\n    var result;\n\n    if (start.getFullYear() > end.getFullYear()) {\n      result = 1;\n    } else if (start.getFullYear() < end.getFullYear()) {\n      result = -1;\n    } else {\n      result = start.getMonth() === end.getMonth() ? 0 : start.getMonth() > end.getMonth() ? 1 : -1;\n    }\n\n    return result;\n  };\n\n  CalendarBase.prototype.checkValue = function (inValue) {\n    if (inValue instanceof Date) {\n      return inValue.toUTCString();\n    } else {\n      return '' + inValue;\n    }\n  };\n\n  CalendarBase.prototype.checkView = function () {\n    if (this.start !== 'Decade' && this.start !== 'Year') {\n      this.setProperties({\n        start: 'Month'\n      }, true);\n    }\n\n    if (this.depth !== 'Decade' && this.depth !== 'Year') {\n      this.setProperties({\n        depth: 'Month'\n      }, true);\n    }\n\n    if (this.getViewNumber(this.depth) > this.getViewNumber(this.start)) {\n      this.setProperties({\n        depth: 'Month'\n      }, true);\n    }\n  };\n\n  CalendarBase.prototype.getDate = function (date, timezone) {\n    if (timezone) {\n      date = new Date(date.toLocaleString('en-US', {\n        timeZone: timezone\n      }));\n    }\n\n    return date;\n  };\n\n  __decorate([Property(new Date(1900, 0, 1))], CalendarBase.prototype, \"min\", void 0);\n\n  __decorate([Property(true)], CalendarBase.prototype, \"enabled\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(new Date(2099, 11, 31))], CalendarBase.prototype, \"max\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"firstDayOfWeek\", void 0);\n\n  __decorate([Property('Gregorian')], CalendarBase.prototype, \"calendarMode\", void 0);\n\n  __decorate([Property('Month')], CalendarBase.prototype, \"start\", void 0);\n\n  __decorate([Property('Month')], CalendarBase.prototype, \"depth\", void 0);\n\n  __decorate([Property(false)], CalendarBase.prototype, \"weekNumber\", void 0);\n\n  __decorate([Property('FirstDay')], CalendarBase.prototype, \"weekRule\", void 0);\n\n  __decorate([Property(true)], CalendarBase.prototype, \"showTodayButton\", void 0);\n\n  __decorate([Property('Short')], CalendarBase.prototype, \"dayHeaderFormat\", void 0);\n\n  __decorate([Property(false)], CalendarBase.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"keyConfigs\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"serverTimezoneOffset\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"created\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"destroyed\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"navigated\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"renderDayCell\", void 0);\n\n  CalendarBase = __decorate([NotifyPropertyChanges], CalendarBase);\n  return CalendarBase;\n}(Component);\n\nexport { CalendarBase };\n/**\n * Represents the Calendar component that allows the user to select a date.\n * ```html\n * <div id=\"calendar\"/>\n * ```\n * ```typescript\n * <script>\n *   var calendarObj = new Calendar({ value: new Date() });\n *   calendarObj.appendTo(\"#calendar\");\n * </script>\n * ```\n */\n\nvar Calendar =\n/** @class */\nfunction (_super) {\n  __extends(Calendar, _super);\n  /**\n   * Initialized new instance of Calendar Class.\n   * Constructor for creating the widget\n   *\n   * @param {CalendarModel} options - Specifies the Calendar model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n\n\n  function Calendar(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * To Initialize the control rendering.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Calendar.prototype.render = function () {\n    if (this.calendarMode === 'Islamic' && this.islamicModule === undefined) {\n      throwError('Requires the injectable Islamic modules to render Calendar in Islamic mode');\n    }\n\n    if (this.isMultiSelection && typeof this.values === 'object' && !isNullOrUndefined(this.values) && this.values.length > 0) {\n      var tempValues = [];\n      var copyValues = [];\n\n      for (var limit = 0; limit < this.values.length; limit++) {\n        if (tempValues.indexOf(+this.values[limit]) === -1) {\n          tempValues.push(+this.values[limit]);\n          copyValues.push(this.values[limit]);\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, true);\n\n      for (var index = 0; index < this.values.length; index++) {\n        if (!this.checkDateValue(this.values[index])) {\n          if (typeof this.values[index] === 'string' && this.checkDateValue(new Date(this.checkValue(this.values[index])))) {\n            var copyDate = new Date(this.checkValue(this.values[index]));\n            this.values.splice(index, 1);\n            this.values.splice(index, 0, copyDate);\n          } else {\n            this.values.splice(index, 1);\n          }\n        }\n      }\n\n      this.setProperties({\n        value: this.values[this.values.length - 1]\n      }, true);\n      this.previousValues = this.values.length;\n    }\n\n    this.validateDate();\n    this.minMaxUpdate();\n\n    if (this.getModuleName() === 'calendar') {\n      this.setEnable(this.enabled);\n      this.setClass(this.cssClass);\n    }\n\n    _super.prototype.render.call(this);\n\n    if (this.getModuleName() === 'calendar') {\n      var form = closest(this.element, 'form');\n\n      if (form) {\n        EventHandler.add(form, 'reset', this.formResetHandler.bind(this));\n      }\n\n      this.setTimeZone(this.serverTimezoneOffset);\n    }\n\n    this.renderComplete();\n  };\n\n  Calendar.prototype.setEnable = function (enable) {\n    if (!enable) {\n      addClass([this.element], DISABLED);\n    } else {\n      removeClass([this.element], DISABLED);\n    }\n  };\n\n  Calendar.prototype.setClass = function (newCssClass, oldCssClass) {\n    if (!isNullOrUndefined(oldCssClass)) {\n      oldCssClass = oldCssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newCssClass)) {\n      newCssClass = newCssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(oldCssClass) && oldCssClass !== '') {\n      removeClass([this.element], oldCssClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(newCssClass)) {\n      addClass([this.element], newCssClass.split(' '));\n    }\n  };\n\n  Calendar.prototype.isDayLightSaving = function () {\n    var secondOffset = new Date(this.value.getFullYear(), 6, 1).getTimezoneOffset();\n    var firstOffset = new Date(this.value.getFullYear(), 0, 1).getTimezoneOffset();\n    return this.value.getTimezoneOffset() < Math.max(firstOffset, secondOffset);\n  };\n\n  Calendar.prototype.setTimeZone = function (offsetValue) {\n    if (!isNullOrUndefined(this.serverTimezoneOffset) && this.value) {\n      var serverTimezoneDiff = offsetValue;\n      var clientTimeZoneDiff = new Date().getTimezoneOffset() / 60;\n      var timeZoneDiff = serverTimezoneDiff + clientTimeZoneDiff;\n      timeZoneDiff = this.isDayLightSaving() ? timeZoneDiff-- : timeZoneDiff;\n      this.value = new Date(this.value.getTime() + timeZoneDiff * 60 * 60 * 1000);\n    }\n  };\n\n  Calendar.prototype.formResetHandler = function () {\n    this.setProperties({\n      value: null\n    }, true);\n  };\n\n  Calendar.prototype.validateDate = function () {\n    if (typeof this.value === 'string') {\n      this.setProperties({\n        value: this.checkDateValue(new Date(this.checkValue(this.value)))\n      }, true); // persist the value property.\n    }\n\n    _super.prototype.validateDate.call(this, this.value);\n\n    if (!isNullOrUndefined(this.value) && this.min <= this.max && this.value >= this.min && this.value <= this.max) {\n      this.currentDate = new Date(this.checkValue(this.value));\n    }\n\n    if (isNaN(+this.value)) {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n\n  Calendar.prototype.minMaxUpdate = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.value) && this.value <= this.min && this.min <= this.max) {\n        this.setProperties({\n          value: this.min\n        }, true);\n        this.changedArgs = {\n          value: this.value\n        };\n      } else {\n        if (!isNullOrUndefined(this.value) && this.value >= this.max && this.min <= this.max) {\n          this.setProperties({\n            value: this.max\n          }, true);\n          this.changedArgs = {\n            value: this.value\n          };\n        }\n      }\n    }\n\n    if (this.getModuleName() !== 'calendar' && !isNullOrUndefined(this.value)) {\n      if (!isNullOrUndefined(this.value) && this.value < this.min && this.min <= this.max) {\n        _super.prototype.minMaxUpdate.call(this, this.min);\n      } else {\n        if (!isNullOrUndefined(this.value) && this.value > this.max && this.min <= this.max) {\n          _super.prototype.minMaxUpdate.call(this, this.max);\n        }\n      }\n    } else {\n      _super.prototype.minMaxUpdate.call(this, this.value);\n    }\n  };\n\n  Calendar.prototype.generateTodayVal = function (value) {\n    var tempValue = new Date();\n\n    if (!isNullOrUndefined(this.timezone)) {\n      tempValue = _super.prototype.getDate.call(this, tempValue, this.timezone);\n    }\n\n    if (value && isNullOrUndefined(this.timezone)) {\n      tempValue.setHours(value.getHours());\n      tempValue.setMinutes(value.getMinutes());\n      tempValue.setSeconds(value.getSeconds());\n      tempValue.setMilliseconds(value.getMilliseconds());\n    } else {\n      tempValue = new Date(tempValue.getFullYear(), tempValue.getMonth(), tempValue.getDate(), 0, 0, 0, 0);\n    }\n\n    return tempValue;\n  };\n\n  Calendar.prototype.todayButtonClick = function (e) {\n    if (this.showTodayButton) {\n      var tempValue = this.generateTodayVal(this.value);\n      this.setProperties({\n        value: tempValue\n      }, true);\n      this.isTodayClicked = true;\n      this.todayButtonEvent = e;\n\n      if (this.isMultiSelection) {\n        var copyValues = this.copyValues(this.values);\n\n        if (!_super.prototype.checkPresentDate.call(this, tempValue, this.values)) {\n          copyValues.push(tempValue);\n          this.setProperties({\n            values: copyValues\n          });\n        }\n      }\n\n      _super.prototype.todayButtonClick.call(this, e, new Date(+this.value));\n    }\n  };\n\n  Calendar.prototype.keyActionHandle = function (e) {\n    _super.prototype.keyActionHandle.call(this, e, this.value, this.isMultiSelection);\n  };\n  /**\n   * Initialize the event handler\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Calendar.prototype.preRender = function () {\n    var _this = this;\n\n    this.changeHandler = function (e) {\n      _this.triggerChange(e);\n    };\n\n    this.checkView();\n\n    _super.prototype.preRender.call(this, this.value);\n  };\n  /**\n   * @returns {void}\n    */\n\n\n  Calendar.prototype.createContent = function () {\n    this.previousDate = this.value;\n    this.previousDateTime = this.value;\n\n    _super.prototype.createContent.call(this);\n  };\n\n  Calendar.prototype.minMaxDate = function (localDate) {\n    return _super.prototype.minMaxDate.call(this, localDate);\n  };\n\n  Calendar.prototype.renderMonths = function (e, value, isCustomDate) {\n    _super.prototype.renderMonths.call(this, e, this.value, isCustomDate);\n  };\n\n  Calendar.prototype.renderDays = function (currentDate, value, isMultiSelect, values, isCustomDate, e) {\n    var tempDays = _super.prototype.renderDays.call(this, currentDate, this.value, this.isMultiSelection, this.values, isCustomDate, e);\n\n    if (this.isMultiSelection) {\n      _super.prototype.validateValues.call(this, this.isMultiSelection, this.values);\n    }\n\n    return tempDays;\n  };\n\n  Calendar.prototype.renderYears = function (e) {\n    if (this.calendarMode === 'Gregorian') {\n      _super.prototype.renderYears.call(this, e, this.value);\n    } else {\n      this.islamicModule.islamicRenderYears(e, this.value);\n    }\n  };\n\n  Calendar.prototype.renderDecades = function (e) {\n    if (this.calendarMode === 'Gregorian') {\n      _super.prototype.renderDecades.call(this, e, this.value);\n    } else {\n      this.islamicModule.islamicRenderDecade(e, this.value);\n    }\n  };\n\n  Calendar.prototype.renderTemplate = function (elements, count, classNm, e) {\n    if (this.calendarMode === 'Gregorian') {\n      _super.prototype.renderTemplate.call(this, elements, count, classNm, e, this.value);\n    } else {\n      this.islamicModule.islamicRenderTemplate(elements, count, classNm, e, this.value);\n    }\n\n    this.changedArgs = {\n      value: this.value,\n      values: this.values\n    };\n    this.changeHandler();\n  };\n\n  Calendar.prototype.clickHandler = function (e) {\n    var eve = e.currentTarget;\n    this.isPopupClicked = true;\n\n    if (eve.classList.contains(OTHERMONTH)) {\n      if (this.isMultiSelection) {\n        var copyValues = this.copyValues(this.values);\n\n        if (copyValues.toString().indexOf(this.getIdValue(e, null).toString()) === -1) {\n          copyValues.push(this.getIdValue(e, null));\n          this.setProperties({\n            values: copyValues\n          }, true);\n          this.setProperties({\n            value: this.values[this.values.length - 1]\n          }, true);\n        } else {\n          this.previousDates = true;\n        }\n      } else {\n        this.setProperties({\n          value: this.getIdValue(e, null)\n        }, true);\n      }\n    }\n\n    var storeView = this.currentView();\n\n    _super.prototype.clickHandler.call(this, e, this.value);\n\n    if (this.isMultiSelection && this.currentDate !== this.value && !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0]) && storeView === 'Year') {\n      this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\n    }\n  };\n\n  Calendar.prototype.switchView = function (view, e, isMultiSelection, isCustomDate) {\n    _super.prototype.switchView.call(this, view, e, this.isMultiSelection, isCustomDate);\n  };\n  /**\n   * To get component name\n   *\n   * @returns {string} Return the component name.\n   * @private\n   */\n\n\n  Calendar.prototype.getModuleName = function () {\n    _super.prototype.getModuleName.call(this);\n\n    return 'calendar';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the properties to be maintained upon browser refresh.\n   *\n   * @returns {string}\n   */\n\n\n  Calendar.prototype.getPersistData = function () {\n    _super.prototype.getPersistData.call(this);\n\n    var keyEntity = ['value', 'values'];\n    return this.addOnPersist(keyEntity);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {CalendarModel} newProp - Returns the dynamic property value of the component.\n   * @param {CalendarModel} oldProp - Returns the previous property value of the component.\n   * @returns {void}\n   * @private\n   */\n\n\n  Calendar.prototype.onPropertyChanged = function (newProp, oldProp) {\n    this.effect = '';\n    this.rangeValidation(this.min, this.max);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'value':\n          if (this.isDateSelected) {\n            if (typeof newProp.value === 'string') {\n              this.setProperties({\n                value: new Date(this.checkValue(newProp.value))\n              }, true);\n            } else {\n              newProp.value = new Date(this.checkValue(newProp.value));\n            }\n\n            if (isNaN(+this.value)) {\n              this.setProperties({\n                value: oldProp.value\n              }, true);\n            }\n\n            this.update();\n          }\n\n          break;\n\n        case 'values':\n          if (this.isDateSelected) {\n            if (typeof newProp.values === 'string' || typeof newProp.values === 'number') {\n              this.setProperties({\n                values: null\n              }, true);\n            } else {\n              var copyValues = this.copyValues(this.values);\n\n              for (var index = 0; index < copyValues.length; index++) {\n                var tempDate = copyValues[index];\n\n                if (this.checkDateValue(tempDate) && !_super.prototype.checkPresentDate.call(this, tempDate, copyValues)) {\n                  copyValues.push(tempDate);\n                }\n              }\n\n              this.setProperties({\n                values: copyValues\n              }, true);\n\n              if (this.values.length > 0) {\n                this.setProperties({\n                  value: newProp.values[newProp.values.length - 1]\n                }, true);\n              }\n            }\n\n            this.validateValues(this.isMultiSelection, this.values);\n            this.update();\n          }\n\n          break;\n\n        case 'isMultiSelection':\n          if (this.isDateSelected) {\n            this.setProperties({\n              isMultiSelection: newProp.isMultiSelection\n            }, true);\n            this.update();\n          }\n\n          break;\n\n        case 'enabled':\n          this.setEnable(this.enabled);\n          break;\n\n        case 'cssClass':\n          if (this.getModuleName() === 'calendar') {\n            this.setClass(newProp.cssClass, oldProp.cssClass);\n          }\n\n          break;\n\n        default:\n          _super.prototype.onPropertyChanged.call(this, newProp, oldProp, this.isMultiSelection, this.values);\n\n      }\n    }\n\n    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n  };\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  Calendar.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    if (this.getModuleName() === 'calendar') {\n      var form = closest(this.element, 'form');\n\n      if (form) {\n        EventHandler.remove(form, 'reset', this.formResetHandler.bind(this));\n      }\n    }\n  };\n  /**\n   * This method is used to navigate to the month/year/decade view of the Calendar.\n   *\n   * @param {string} view - Specifies the view of the Calendar.\n   * @param {Date} date - Specifies the focused date in a view.\n   * @param {boolean} isCustomDate - Specifies whether the calendar is rendered with custom today date or not.\n   * @returns {void}\n    */\n\n\n  Calendar.prototype.navigateTo = function (view, date, isCustomDate) {\n    this.minMaxUpdate();\n\n    _super.prototype.navigateTo.call(this, view, date, isCustomDate);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * Gets the current view of the Calendar.\n   *\n   * @returns {string}\n    */\n\n\n  Calendar.prototype.currentView = function () {\n    return _super.prototype.currentView.call(this);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n\n  /**\n   * This method is used to add the single or multiple dates to the values property of the Calendar.\n   *\n   * @param {Date | Date[]} dates - Specifies the date or dates to be added to the values property of the Calendar.\n   * @returns {void}\n    */\n\n\n  Calendar.prototype.addDate = function (dates) {\n    if (typeof dates !== 'string' && typeof dates !== 'number') {\n      var copyValues = this.copyValues(this.values);\n\n      if (typeof dates === 'object' && dates.length > 0) {\n        var tempDates = dates;\n\n        for (var i = 0; i < tempDates.length; i++) {\n          if (this.checkDateValue(tempDates[i]) && !_super.prototype.checkPresentDate.call(this, tempDates[i], copyValues)) {\n            if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\n              copyValues.push(tempDates[i]);\n            } else {\n              copyValues = [new Date(+tempDates[i])];\n            }\n          }\n        }\n      } else {\n        if (this.checkDateValue(dates) && !_super.prototype.checkPresentDate.call(this, dates, copyValues)) {\n          if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\n            copyValues.push(dates);\n          } else {\n            copyValues = [new Date(+dates)];\n          }\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, true);\n\n      if (this.isMultiSelection) {\n        this.setProperties({\n          value: this.values[this.values.length - 1]\n        }, true);\n      }\n\n      this.validateValues(this.isMultiSelection, copyValues);\n      this.update();\n      this.changedArgs = {\n        value: this.value,\n        values: this.values\n      };\n      this.changeHandler();\n    }\n  };\n  /**\n   * This method is used to remove the single or multiple dates from the values property of the Calendar.\n   *\n   * @param {Date | Date[]} dates - Specifies the date or dates which need to be removed from the values property of the Calendar.\n   * @returns {void}\n    */\n\n\n  Calendar.prototype.removeDate = function (dates) {\n    if (typeof dates !== 'string' && typeof dates !== 'number' && !isNullOrUndefined(this.values) && this.values.length > 0) {\n      var copyValues = this.copyValues(this.values);\n\n      if (typeof dates === 'object' && dates.length > 0) {\n        var tempDates = dates;\n\n        for (var index = 0; index < tempDates.length; index++) {\n          for (var i = 0; i < copyValues.length; i++) {\n            if (+copyValues[i] === +tempDates[index]) {\n              copyValues.splice(i, 1);\n            }\n          }\n        }\n      } else {\n        for (var i = 0; i < copyValues.length; i++) {\n          if (+copyValues[i] === +dates) {\n            copyValues.splice(i, 1);\n          }\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, false);\n      this.update();\n\n      if (this.isMultiSelection) {\n        this.setProperties({\n          value: this.values[this.values.length - 1]\n        }, true);\n      }\n\n      this.changedArgs = {\n        value: this.value,\n        values: this.values\n      };\n      this.changeHandler();\n    }\n  };\n  /**\n   * To set custom today date in calendar\n   *\n   * @param {Date} date - Specifies date value to be set.\n   * @private\n   * @returns {void}\n   */\n\n\n  Calendar.prototype.setTodayDate = function (date) {\n    var todayDate = new Date(+date);\n    this.setProperties({\n      value: todayDate\n    }, true);\n\n    _super.prototype.todayButtonClick.call(this, null, todayDate, true);\n  };\n\n  Calendar.prototype.update = function () {\n    this.validateDate();\n    this.minMaxUpdate();\n\n    _super.prototype.setValueUpdate.call(this);\n  };\n\n  Calendar.prototype.selectDate = function (e, date, element) {\n    _super.prototype.selectDate.call(this, e, date, element, this.isMultiSelection, this.values);\n\n    if (this.isMultiSelection && !isNullOrUndefined(this.values) && this.values.length > 0) {\n      this.setProperties({\n        value: this.values[this.values.length - 1]\n      }, true);\n    }\n\n    this.changedArgs = {\n      value: this.value,\n      values: this.values\n    };\n    this.changeHandler(e);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Calendar.prototype.changeEvent = function (e) {\n    if ((this.value && this.value.valueOf()) !== (this.previousDate && +this.previousDate.valueOf()) || this.isMultiSelection) {\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', this.changedArgs);\n      }\n\n      this.previousDate = new Date(+this.value);\n    }\n  };\n\n  Calendar.prototype.triggerChange = function (e) {\n    if (!isNullOrUndefined(this.todayButtonEvent) && this.isTodayClicked) {\n      e = this.todayButtonEvent;\n      this.isTodayClicked = false;\n    }\n\n    this.changedArgs.event = e || null;\n    this.changedArgs.isInteracted = !isNullOrUndefined(e);\n\n    if (!isNullOrUndefined(this.value)) {\n      this.setProperties({\n        value: this.value\n      }, true);\n    }\n\n    if (!this.isMultiSelection && +this.value !== Number.NaN && (!isNullOrUndefined(this.value) && !isNullOrUndefined(this.previousDate) && +new Date(this.value.toDateString()) !== +new Date(this.previousDate.toDateString()) || this.previousDate == null && !isNaN(+this.value))) {\n      this.changeEvent(e);\n    } else if (!isNullOrUndefined(this.values) && this.previousValues !== this.values.length) {\n      this.changeEvent(e);\n      this.previousValues = this.values.length;\n    }\n  };\n\n  __decorate([Property(null)], Calendar.prototype, \"value\", void 0);\n\n  __decorate([Property(null)], Calendar.prototype, \"values\", void 0);\n\n  __decorate([Property(false)], Calendar.prototype, \"isMultiSelection\", void 0);\n\n  __decorate([Event()], Calendar.prototype, \"change\", void 0);\n\n  Calendar = __decorate([NotifyPropertyChanges], Calendar);\n  return Calendar;\n}(CalendarBase);\n\nexport { Calendar };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","EventHandler","Internationalization","KeyboardEvents","L10n","NotifyPropertyChanges","cldrData","getDefaultDateObject","rippleEffect","removeClass","detach","closest","addClass","attributes","getValue","getUniqueID","extend","Browser","Property","Event","isNullOrUndefined","throwError","OTHERMONTH","OTHERDECADE","ROOT","DEVICE","HEADER","RTL","CONTENT","YEAR","MONTH","DECADE","ICON","PREVICON","NEXTICON","PREVSPAN","NEXTSPAN","ICONCONTAINER","DISABLED","OVERLAY","WEEKEND","WEEKNUMBER","SELECTED","FOCUSEDDATE","OTHERMONTHROW","TODAY","TITLE","LINK","CELL","WEEKHEADER","ZOOMIN","FOOTER","BTN","FLAT","CSS","PRIMARY","DAYHEADERLONG","dayMilliSeconds","minutesMilliSeconds","CalendarBase","_super","options","element","_this","call","effect","isPopupClicked","isDateSelected","isTodayClicked","preventChange","isAngular","previousDates","render","rangeValidation","min","max","calendarEleCopy","cloneNode","calendarMode","setSeconds","Date","globalize","locale","firstDayOfWeek","setProperties","getFirstDayOfWeek","todayDisabled","todayDate","setHours","getModuleName","classList","add","enableRtl","isDevice","tabIndex","hasAttribute","getAttribute","setAttribute","calendarElement","createElement","createHeader","createContent","wireEvents","getDefaultKeyConfig","defaultKeyConfigs","controlUp","controlDown","moveDown","moveUp","moveLeft","moveRight","select","home","end","pageUp","pageDown","shiftPageUp","shiftPageDown","controlHome","controlEnd","altUpArrow","spacebar","altRightArrow","altLeftArrow","validateDate","value","checkDateValue","checkValue","currentDate","setOverlayIndex","popupWrapper","popupElement","modal","index","parseInt","style","zIndex","toString","minMaxUpdate","ariaPrevAttrs","ariaNextAttrs","ariaTitleAttrs","headerElement","className","iconContainer","previousIcon","attrs","type","duration","selector","isCenterRipple","nextIcon","headerTitleElement","appendChild","adjustLongHeaderSize","contentElement","table","id","createContentHeader","createContentBody","showTodayButton","createContentFooter","getCultureValues","culShortNames","cldrObj","dayFormat","dayHeaderFormat","toLowerCase","getCultureObjects","_i","_a","keys","obj","push","toCapitalize","text","toUpperCase","slice","querySelectorAll","daysCount","html","tableHeadElement","weekNumber","shortNames","shiftArray","days","innerHTML","start","renderYears","renderDecades","renderMonths","updateFooter","todayElement","textContent","l10","getConstant","minimum","maximum","l10nLocale","today","role","footer","contains","todayButtonClick","ref","keyConfig","moduleName","navigateTitle","keyConfigs","keyboardModule","eventName","keyAction","keyActionHandle","bind","dateWireEvents","serverModuleName","e","isCustomDate","currentView","depth","getViewNumber","navigateTo","resetCalendar","tableBodyElement","renderDayCellArgs","multiSelection","focusedDate","querySelector","selectedDate","split","view","depthValue","levelRestrict","action","keyboardNavigate","preventDefault","selectDate","contentClick","title","firstDay","lastDay","addMonths","addYears","getFullYear","focus","number","date","isMonthYearRange","addDay","isMinMaxRange","preRender","navigatePreviousHandler","navigatePrevious","navigateNextHandler","navigateNext","navigateHandler","triggerNavigate","minMaxDate","localDate","minDate","maxDate","numCells","tdEles","renderDays","islamicModule","islamicRenderDays","renderTemplate","islamicRenderTemplate","values","isTodayDate","cellsCount","getDate","timezone","currentMonth","getMonth","titleUpdate","getHours","getMinutes","getSeconds","getMilliseconds","getDay","setStartDate","day","weekEle","weekAnchor","numberOfDays","weekRule","finalDate","getWeek","dateFormatOptions","skeleton","parseDate","formatDate","tdEle","dayCell","dayLink","format","disabled","isDisabled","isOutOfRange","argument","renderDayCellEvent","argsDate","localDateString","tempDateString","splice","otherMnthBool","disabledCls","clickHandler","currentTarget","tempValue","formatOptions","calendar","getDateVal","innerText","copyValues","type_1","formatOptions_1","localDateString_1","tempDateString_1","indexOf","updateFocus","otherMonth","tableElement","removeTableHeadElement","valueUtil","curDate","mon","yr","curYrs","minYr","minMonth","maxYr","maxMonth","setMonth","setDate","month","localMonth","yearCell","localYr","startYr","setFullYear","endYr","startFullYr","endFullYr","startHdrYr","endHdrYr","startYear","rowIterator","year","valueOf","collection","lastDate","timeOffset","Math","abs","getTimezoneOffset","findLastDay","isNaN","elements","count","classNm","trEle","weekNumCell","numberCell","otherMonthCell","row","children","iconHandler","islamicIconHandler","setAriaActiveDescendant","clickEventEmitter","eve","getIdValue","islamicPreviousHeader","islamicDate","getIslamicDate","toGregorian","switchView","remove","requiredModules","modules","args","member","getPersistData","keyEntity","addOnPersist","onPropertyChanged","newProp","oldProp","prop","validateValues","checkView","setLocale","undefined","skipIndex","tempValueString","minFormatOption","minStringValue","minString","maxFormatOption","maxStringValue","maxString","setValueUpdate","dayFormatOptions","monthFormatOptions","setActiveDescendant","focusedEle","selectedEle","previousIconHandler","compareMonth","nextIconHandler","compareYear","compareDecade","destroy","removeAttribute","stringVal","previous","islamicPrevious","next","islamicNext","ld","gregorianFormat","islamicFormat","mainVal","ceil","time","tzOffset","getTime","tzOffsetDiff","setTime","getMaxDays","dateString","node","setDateDecade","setDateYear","checkPresentDate","tempElement","selectedElement","dates","previousValue","checkPrevious","name","trigger","navigatedEvent","navigatedArgs","event","compare","startDate","endDate","modifier","result","array","concat","column","findNextTD","rangeValue","filter","tmpDate","inValue","toUTCString","toLocaleString","timeZone","Calendar","isMultiSelection","tempValues","limit","copyDate","previousValues","setEnable","enabled","setClass","cssClass","form","formResetHandler","setTimeZone","serverTimezoneOffset","renderComplete","enable","newCssClass","oldCssClass","replace","trim","isDayLightSaving","secondOffset","firstOffset","offsetValue","serverTimezoneDiff","clientTimeZoneDiff","timeZoneDiff","changedArgs","generateTodayVal","setMinutes","setMilliseconds","todayButtonEvent","changeHandler","triggerChange","previousDate","previousDateTime","isMultiSelect","tempDays","islamicRenderYears","islamicRenderDecade","storeView","update","tempDate","addDate","tempDates","removeDate","setTodayDate","changeEvent","isInteracted","Number","NaN","toDateString"],"sources":["C:/Users/chick/OneDrive/Documents/Workout app/my-app/node_modules/@syncfusion/ej2-calendars/src/calendar/calendar.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Internationalization } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, L10n } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { cldrData, getDefaultDateObject, rippleEffect } from '@syncfusion/ej2-base';\nimport { removeClass, detach, closest, addClass, attributes } from '@syncfusion/ej2-base';\nimport { getValue, getUniqueID, extend, Browser } from '@syncfusion/ej2-base';\nimport { Property, Event, isNullOrUndefined, throwError } from '@syncfusion/ej2-base';\n//class constant defination.\nvar OTHERMONTH = 'e-other-month';\nvar OTHERDECADE = 'e-other-year';\nvar ROOT = 'e-calendar';\nvar DEVICE = 'e-device';\nvar HEADER = 'e-header';\nvar RTL = 'e-rtl';\nvar CONTENT = 'e-content';\nvar YEAR = 'e-year';\nvar MONTH = 'e-month';\nvar DECADE = 'e-decade';\nvar ICON = 'e-icons';\nvar PREVICON = 'e-prev';\nvar NEXTICON = 'e-next';\nvar PREVSPAN = 'e-date-icon-prev';\nvar NEXTSPAN = 'e-date-icon-next ';\nvar ICONCONTAINER = 'e-icon-container';\nvar DISABLED = 'e-disabled';\nvar OVERLAY = 'e-overlay';\nvar WEEKEND = 'e-weekend';\nvar WEEKNUMBER = 'e-week-number';\nvar SELECTED = 'e-selected';\nvar FOCUSEDDATE = 'e-focused-date';\nvar OTHERMONTHROW = 'e-month-hide';\nvar TODAY = 'e-today';\nvar TITLE = 'e-title';\nvar LINK = 'e-day';\nvar CELL = 'e-cell';\nvar WEEKHEADER = 'e-week-header';\nvar ZOOMIN = 'e-zoomin';\nvar FOOTER = 'e-footer-container';\nvar BTN = 'e-btn';\nvar FLAT = 'e-flat';\nvar CSS = 'e-css';\nvar PRIMARY = 'e-primary';\nvar DAYHEADERLONG = 'e-calendar-day-header-lg';\nvar dayMilliSeconds = 86400000;\nvar minutesMilliSeconds = 60000;\n/**\n *\n * @private\n */\nvar CalendarBase = /** @class */ (function (_super) {\n    __extends(CalendarBase, _super);\n    /**\n     * Initialized new instance of Calendar Class.\n     * Constructor for creating the widget\n     *\n     * @param {CalendarBaseModel} options - Specifies the CalendarBase model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function CalendarBase(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.effect = '';\n        _this.isPopupClicked = false;\n        _this.isDateSelected = true;\n        _this.isTodayClicked = false;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        _this.previousDates = false;\n        return _this;\n    }\n    /**\n     * To Initialize the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    CalendarBase.prototype.render = function () {\n        this.rangeValidation(this.min, this.max);\n        this.calendarEleCopy = this.element.cloneNode(true);\n        if (this.calendarMode === 'Islamic') {\n            if (+(this.min.setSeconds(0)) === +new Date(1900, 0, 1, 0, 0, 0)) {\n                this.min = new Date(1944, 2, 18);\n            }\n            if (+this.max === +new Date(2099, 11, 31)) {\n                this.max = new Date(2069, 10, 16);\n            }\n        }\n        this.globalize = new Internationalization(this.locale);\n        if (isNullOrUndefined(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\n            this.setProperties({ firstDayOfWeek: this.globalize.getFirstDayOfWeek() }, true);\n        }\n        this.todayDisabled = false;\n        this.todayDate = new Date(new Date().setHours(0, 0, 0, 0));\n        if (this.getModuleName() === 'calendar') {\n            this.element.classList.add(ROOT);\n            if (this.enableRtl) {\n                this.element.classList.add(RTL);\n            }\n            if (Browser.isDevice) {\n                this.element.classList.add(DEVICE);\n            }\n            attributes(this.element, {\n                'data-role': 'calendar'\n            });\n            this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n            this.element.setAttribute('tabindex', this.tabIndex);\n        }\n        else {\n            this.calendarElement = this.createElement('div');\n            this.calendarElement.classList.add(ROOT);\n            if (this.enableRtl) {\n                this.calendarElement.classList.add(RTL);\n            }\n            if (Browser.isDevice) {\n                this.calendarElement.classList.add(DEVICE);\n            }\n            attributes(this.calendarElement, {\n                'data-role': 'calendar'\n            });\n        }\n        this.createHeader();\n        this.createContent();\n        this.wireEvents();\n    };\n    CalendarBase.prototype.rangeValidation = function (min, max) {\n        if (isNullOrUndefined(min)) {\n            this.setProperties({ min: new Date(1900, 0, 1) }, true);\n        }\n        if (isNullOrUndefined(max)) {\n            this.setProperties({ max: new Date(2099, 11, 31) }, true);\n        }\n    };\n    CalendarBase.prototype.getDefaultKeyConfig = function () {\n        this.defaultKeyConfigs = {\n            controlUp: 'ctrl+38',\n            controlDown: 'ctrl+40',\n            moveDown: 'downarrow',\n            moveUp: 'uparrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            select: 'enter',\n            home: 'home',\n            end: 'end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            shiftPageUp: 'shift+pageup',\n            shiftPageDown: 'shift+pagedown',\n            controlHome: 'ctrl+home',\n            controlEnd: 'ctrl+end',\n            altUpArrow: 'alt+uparrow',\n            spacebar: 'space',\n            altRightArrow: 'alt+rightarrow',\n            altLeftArrow: 'alt+leftarrow'\n        };\n        return this.defaultKeyConfigs;\n    };\n    CalendarBase.prototype.validateDate = function (value) {\n        this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(this.min))) }, true);\n        this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(this.max))) }, true);\n        this.currentDate = this.currentDate ? this.currentDate : new Date(new Date().setHours(0, 0, 0, 0));\n        if (!isNullOrUndefined(value) && this.min <= this.max && value >= this.min && value <= this.max) {\n            this.currentDate = new Date(this.checkValue(value));\n        }\n    };\n    CalendarBase.prototype.setOverlayIndex = function (popupWrapper, popupElement, modal, isDevice) {\n        if (isDevice && !isNullOrUndefined(popupElement) && !isNullOrUndefined(modal) && !isNullOrUndefined(popupWrapper)) {\n            var index = parseInt(popupElement.style.zIndex, 10) ? parseInt(popupElement.style.zIndex, 10) : 1000;\n            modal.style.zIndex = (index - 1).toString();\n            popupWrapper.style.zIndex = index.toString();\n        }\n    };\n    CalendarBase.prototype.minMaxUpdate = function (value) {\n        if (!(+this.min <= +this.max)) {\n            this.setProperties({ min: this.min }, true);\n            addClass([this.element], OVERLAY);\n        }\n        else {\n            removeClass([this.element], OVERLAY);\n        }\n        this.min = isNullOrUndefined(this.min) || !(+this.min) ? this.min = new Date(1900, 0, 1) : this.min;\n        this.max = isNullOrUndefined(this.max) || !(+this.max) ? this.max = new Date(2099, 11, 31) : this.max;\n        if (+this.min <= +this.max && value && +value <= +this.max && +value >= +this.min) {\n            this.currentDate = new Date(this.checkValue(value));\n        }\n        else {\n            if (+this.min <= +this.max && !value && +this.currentDate > +this.max) {\n                this.currentDate = new Date(this.checkValue(this.max));\n            }\n            else {\n                if (+this.currentDate < +this.min) {\n                    this.currentDate = new Date(this.checkValue(this.min));\n                }\n            }\n        }\n    };\n    CalendarBase.prototype.createHeader = function () {\n        var ariaPrevAttrs = {\n            'aria-disabled': 'false',\n            'aria-label': 'previous month'\n        };\n        var ariaNextAttrs = {\n            'aria-disabled': 'false',\n            'aria-label': 'next month'\n        };\n        var ariaTitleAttrs = {\n            'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title'\n        };\n        this.headerElement = this.createElement('div', { className: HEADER });\n        var iconContainer = this.createElement('div', { className: ICONCONTAINER });\n        this.previousIcon = this.createElement('button', { className: '' + PREVICON, attrs: { type: 'button' } });\n        rippleEffect(this.previousIcon, {\n            duration: 400,\n            selector: '.e-prev',\n            isCenterRipple: true\n        });\n        attributes(this.previousIcon, ariaPrevAttrs);\n        this.nextIcon = this.createElement('button', { className: '' + NEXTICON, attrs: { type: 'button' } });\n        rippleEffect(this.nextIcon, {\n            selector: '.e-next',\n            duration: 400,\n            isCenterRipple: true\n        });\n        if (this.getModuleName() === 'daterangepicker') {\n            attributes(this.previousIcon, { tabIndex: '-1' });\n            attributes(this.nextIcon, { tabIndex: '-1' });\n        }\n        attributes(this.nextIcon, ariaNextAttrs);\n        this.headerTitleElement = this.createElement('div', { className: '' + LINK + ' ' + TITLE });\n        attributes(this.headerTitleElement, ariaTitleAttrs);\n        this.headerElement.appendChild(this.headerTitleElement);\n        this.previousIcon.appendChild(this.createElement('span', { className: '' + PREVSPAN + ' ' + ICON }));\n        this.nextIcon.appendChild(this.createElement('span', { className: '' + NEXTSPAN + ' ' + ICON }));\n        iconContainer.appendChild(this.previousIcon);\n        iconContainer.appendChild(this.nextIcon);\n        this.headerElement.appendChild(iconContainer);\n        if (this.getModuleName() === 'calendar') {\n            this.element.appendChild(this.headerElement);\n        }\n        else {\n            this.calendarElement.appendChild(this.headerElement);\n        }\n        this.adjustLongHeaderSize();\n    };\n    CalendarBase.prototype.createContent = function () {\n        this.contentElement = this.createElement('div', { className: CONTENT });\n        this.table = this.createElement('table', { attrs: { tabIndex: '0', 'role': 'grid', 'aria-activedescendant': '', 'aria-labelledby': this.element.id } });\n        if (this.getModuleName() === 'calendar') {\n            this.element.appendChild(this.contentElement);\n        }\n        else {\n            this.calendarElement.appendChild(this.contentElement);\n        }\n        this.contentElement.appendChild(this.table);\n        this.createContentHeader();\n        this.createContentBody();\n        if (this.showTodayButton) {\n            this.createContentFooter();\n        }\n    };\n    CalendarBase.prototype.getCultureValues = function () {\n        var culShortNames = [];\n        var cldrObj;\n        var dayFormat = 'days.stand-alone.' + this.dayHeaderFormat.toLowerCase();\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            cldrObj = (getValue(dayFormat, getDefaultDateObject()));\n        }\n        else {\n            cldrObj = (this.getCultureObjects(cldrData, '' + this.locale));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    };\n    CalendarBase.prototype.toCapitalize = function (text) {\n        return !isNullOrUndefined(text) && text.length ? text[0].toUpperCase() + text.slice(1) : text;\n    };\n    CalendarBase.prototype.createContentHeader = function () {\n        if (this.getModuleName() === 'calendar') {\n            if (!isNullOrUndefined(this.element.querySelectorAll('.e-content .e-week-header')[0])) {\n                detach(this.element.querySelectorAll('.e-content .e-week-header')[0]);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0])) {\n                detach(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0]);\n            }\n        }\n        var daysCount = 6;\n        var html = '';\n        if (this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\n            this.setProperties({ firstDayOfWeek: 0 }, true);\n        }\n        this.tableHeadElement = this.createElement('thead', { className: WEEKHEADER });\n        if (this.weekNumber) {\n            html += '<th class=\"e-week-number\"></th>';\n            if (this.getModuleName() === 'calendar') {\n                addClass([this.element], '' + WEEKNUMBER);\n            }\n            else {\n                addClass([this.calendarElement], '' + WEEKNUMBER);\n            }\n        }\n        // eslint-disable-next-line max-len\n        var shortNames = this.shiftArray(((this.getCultureValues().length > 0 && this.getCultureValues())), this.firstDayOfWeek);\n        for (var days = 0; days <= daysCount; days++) {\n            html += '<th  class=\"\">' + this.toCapitalize(shortNames[days]) + '</th>';\n        }\n        html = '<tr>' + html + '</tr>';\n        this.tableHeadElement.innerHTML = html;\n        this.table.appendChild(this.tableHeadElement);\n    };\n    CalendarBase.prototype.createContentBody = function () {\n        if (this.getModuleName() === 'calendar') {\n            if (!isNullOrUndefined(this.element.querySelectorAll('.e-content tbody')[0])) {\n                detach(this.element.querySelectorAll('.e-content tbody')[0]);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content tbody')[0])) {\n                detach(this.calendarElement.querySelectorAll('.e-content tbody')[0]);\n            }\n        }\n        switch (this.start) {\n            case 'Year':\n                this.renderYears();\n                break;\n            case 'Decade':\n                this.renderDecades();\n                break;\n            default:\n                this.renderMonths();\n        }\n    };\n    CalendarBase.prototype.updateFooter = function () {\n        this.todayElement.textContent = this.l10.getConstant('today');\n        this.todayElement.setAttribute('aria-label', this.l10.getConstant('today'));\n    };\n    CalendarBase.prototype.createContentFooter = function () {\n        if (this.showTodayButton) {\n            var minimum = new Date(+this.min);\n            var maximum = new Date(+this.max);\n            var l10nLocale = { today: 'Today' };\n            this.globalize = new Internationalization(this.locale);\n            this.l10 = new L10n(this.getModuleName(), l10nLocale, this.locale);\n            this.todayElement = this.createElement('button', { attrs: { role: 'button' } });\n            rippleEffect(this.todayElement);\n            this.updateFooter();\n            addClass([this.todayElement], [BTN, TODAY, FLAT, PRIMARY, CSS]);\n            if ((!(+new Date(minimum.setHours(0, 0, 0, 0)) <= +this.todayDate &&\n                +this.todayDate <= +new Date(maximum.setHours(0, 0, 0, 0)))) || (this.todayDisabled)) {\n                addClass([this.todayElement], DISABLED);\n            }\n            this.footer = this.createElement('div', { className: FOOTER });\n            this.footer.appendChild(this.todayElement);\n            if (this.getModuleName() === 'calendar') {\n                this.element.appendChild(this.footer);\n            }\n            if (this.getModuleName() === 'datepicker') {\n                this.calendarElement.appendChild(this.footer);\n            }\n            if (this.getModuleName() === 'datetimepicker') {\n                this.calendarElement.appendChild(this.footer);\n            }\n            if (!this.todayElement.classList.contains(DISABLED)) {\n                EventHandler.add(this.todayElement, 'click', this.todayButtonClick, this);\n            }\n        }\n    };\n    CalendarBase.prototype.wireEvents = function (id, ref, keyConfig, moduleName) {\n        EventHandler.add(this.headerTitleElement, 'click', this.navigateTitle, this);\n        this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);\n        if (this.getModuleName() === 'calendar') {\n            this.keyboardModule = new KeyboardEvents(this.element, {\n                eventName: 'keydown',\n                keyAction: this.keyActionHandle.bind(this),\n                keyConfigs: this.defaultKeyConfigs\n            });\n        }\n        else {\n            this.keyboardModule = new KeyboardEvents(this.calendarElement, {\n                eventName: 'keydown',\n                keyAction: this.keyActionHandle.bind(this),\n                keyConfigs: this.defaultKeyConfigs\n            });\n        }\n    };\n    CalendarBase.prototype.dateWireEvents = function (id, ref, keyConfig, moduleName) {\n        this.defaultKeyConfigs = this.getDefaultKeyConfig();\n        this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);\n        this.serverModuleName = moduleName;\n    };\n    CalendarBase.prototype.todayButtonClick = function (e, value, isCustomDate) {\n        if (this.showTodayButton) {\n            if (this.currentView() === this.depth) {\n                this.effect = '';\n            }\n            else {\n                this.effect = 'e-zoomin';\n            }\n            if (this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n                this.navigateTo(this.depth, new Date(this.checkValue(value)), isCustomDate);\n            }\n            else {\n                this.navigateTo('Month', new Date(this.checkValue(value)), isCustomDate);\n            }\n        }\n    };\n    CalendarBase.prototype.resetCalendar = function () {\n        this.calendarElement && detach(this.calendarElement);\n        this.tableBodyElement && detach(this.tableBodyElement);\n        this.table && detach(this.table);\n        this.tableHeadElement && detach(this.tableHeadElement);\n        this.nextIcon && detach(this.nextIcon);\n        this.previousIcon && detach(this.previousIcon);\n        this.footer && detach(this.footer);\n        this.todayElement = null;\n        this.renderDayCellArgs = null;\n        this.calendarElement = this.tableBodyElement = this.footer = this.tableHeadElement = this.nextIcon = this.previousIcon = this.table = null;\n    };\n    CalendarBase.prototype.keyActionHandle = function (e, value, multiSelection) {\n        var focusedDate = this.tableBodyElement.querySelector('tr td.e-focused-date');\n        var selectedDate;\n        if (multiSelection) {\n            if (!isNullOrUndefined(focusedDate) && +value === parseInt(focusedDate.getAttribute('id').split('_')[0], 10)) {\n                selectedDate = focusedDate;\n            }\n            else {\n                selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\n            }\n        }\n        else {\n            selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\n        }\n        var view = this.getViewNumber(this.currentView());\n        var depthValue = this.getViewNumber(this.depth);\n        var levelRestrict = (view === depthValue && this.getViewNumber(this.start) >= depthValue);\n        this.effect = '';\n        switch (e.action) {\n            case 'moveLeft':\n                this.keyboardNavigate(-1, view, e, this.max, this.min);\n                e.preventDefault();\n                break;\n            case 'moveRight':\n                this.keyboardNavigate(1, view, e, this.max, this.min);\n                e.preventDefault();\n                break;\n            case 'moveUp':\n                if (view === 0) {\n                    this.keyboardNavigate(-7, view, e, this.max, this.min); // move the current date to the previous seven days.\n                }\n                else {\n                    this.keyboardNavigate(-4, view, e, this.max, this.min); // move the current year to the previous four days.\n                }\n                e.preventDefault();\n                break;\n            case 'moveDown':\n                if (view === 0) {\n                    this.keyboardNavigate(7, view, e, this.max, this.min);\n                }\n                else {\n                    this.keyboardNavigate(4, view, e, this.max, this.min);\n                }\n                e.preventDefault();\n                break;\n            case 'select':\n                if (e.target === this.todayElement) {\n                    this.todayButtonClick(e, value);\n                }\n                else {\n                    var element = !isNullOrUndefined(focusedDate) ? focusedDate : selectedDate;\n                    if (!isNullOrUndefined(element) && !element.classList.contains(DISABLED)) {\n                        if (levelRestrict) {\n                            // eslint-disable-next-line radix\n                            var d = new Date(parseInt('' + (element).id, 0));\n                            this.selectDate(e, d, (element));\n                        }\n                        else {\n                            this.contentClick(null, --view, (element), value);\n                        }\n                    }\n                }\n                break;\n            case 'controlUp':\n                this.title();\n                e.preventDefault();\n                break;\n            case 'controlDown':\n                if (!isNullOrUndefined(focusedDate) || !isNullOrUndefined(selectedDate) && !levelRestrict) {\n                    this.contentClick(null, --view, (focusedDate || selectedDate), value);\n                }\n                e.preventDefault();\n                break;\n            case 'home':\n                this.currentDate = this.firstDay(this.currentDate);\n                detach(this.tableBodyElement);\n                if (view === 0) {\n                    this.renderMonths(e);\n                }\n                else if (view === 1) {\n                    this.renderYears(e);\n                }\n                else {\n                    this.renderDecades(e);\n                }\n                e.preventDefault();\n                break;\n            case 'end':\n                this.currentDate = this.lastDay(this.currentDate, view);\n                detach(this.tableBodyElement);\n                if (view === 0) {\n                    this.renderMonths(e);\n                }\n                else if (view === 1) {\n                    this.renderYears(e);\n                }\n                else {\n                    this.renderDecades(e);\n                }\n                e.preventDefault();\n                break;\n            case 'pageUp':\n                this.addMonths(this.currentDate, -1);\n                this.navigateTo('Month', this.currentDate);\n                e.preventDefault();\n                break;\n            case 'pageDown':\n                this.addMonths(this.currentDate, 1);\n                this.navigateTo('Month', this.currentDate);\n                e.preventDefault();\n                break;\n            case 'shiftPageUp':\n                this.addYears(this.currentDate, -1);\n                this.navigateTo('Month', this.currentDate);\n                e.preventDefault();\n                break;\n            case 'shiftPageDown':\n                this.addYears(this.currentDate, 1);\n                this.navigateTo('Month', this.currentDate);\n                e.preventDefault();\n                break;\n            case 'controlHome':\n                this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 0, 1));\n                e.preventDefault();\n                break;\n            case 'controlEnd':\n                this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 11, 31));\n                e.preventDefault();\n                break;\n        }\n        if (this.getModuleName() === 'calendar') {\n            this.table.focus();\n        }\n    };\n    CalendarBase.prototype.keyboardNavigate = function (number, currentView, e, max, min) {\n        var date = new Date(this.checkValue(this.currentDate));\n        switch (currentView) {\n            case 2:\n                this.addYears(this.currentDate, number);\n                if (this.isMonthYearRange(this.currentDate)) {\n                    detach(this.tableBodyElement);\n                    this.renderDecades(e);\n                }\n                else {\n                    this.currentDate = date;\n                }\n                break;\n            case 1:\n                this.addMonths(this.currentDate, number);\n                if (this.calendarMode === 'Gregorian') {\n                    if (this.isMonthYearRange(this.currentDate)) {\n                        detach(this.tableBodyElement);\n                        this.renderYears(e);\n                    }\n                    else {\n                        this.currentDate = date;\n                    }\n                }\n                else {\n                    if (this.isMonthYearRange(this.currentDate)) {\n                        detach(this.tableBodyElement);\n                        this.renderYears(e);\n                    }\n                    else {\n                        this.currentDate = date;\n                    }\n                }\n                break;\n            case 0:\n                this.addDay(this.currentDate, number, e, max, min);\n                if (this.isMinMaxRange(this.currentDate)) {\n                    detach(this.tableBodyElement);\n                    this.renderMonths(e);\n                }\n                else {\n                    this.currentDate = date;\n                }\n                break;\n        }\n    };\n    /**\n     * Initialize the event handler\n     *\n     * @param {Date} value - Specifies value of date.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CalendarBase.prototype.preRender = function (value) {\n        var _this = this;\n        this.navigatePreviousHandler = this.navigatePrevious.bind(this);\n        this.navigateNextHandler = this.navigateNext.bind(this);\n        this.defaultKeyConfigs = this.getDefaultKeyConfig();\n        this.navigateHandler = function (e) {\n            _this.triggerNavigate(e);\n        };\n    };\n    CalendarBase.prototype.minMaxDate = function (localDate) {\n        var currentDate = new Date(new Date(+localDate).setHours(0, 0, 0, 0));\n        var minDate = new Date(new Date(+this.min).setHours(0, 0, 0, 0));\n        var maxDate = new Date(new Date(+this.max).setHours(0, 0, 0, 0));\n        if (+currentDate === +minDate || +currentDate === +maxDate) {\n            if (+localDate < +this.min) {\n                localDate = new Date(+this.min);\n            }\n            if (+localDate > +this.max) {\n                localDate = new Date(+this.max);\n            }\n        }\n        return localDate;\n    };\n    CalendarBase.prototype.renderMonths = function (e, value, isCustomDate) {\n        var numCells = this.weekNumber ? 8 : 7;\n        var tdEles;\n        if (this.calendarMode === 'Gregorian') {\n            tdEles = this.renderDays(this.currentDate, value, null, null, isCustomDate, e);\n        }\n        else {\n            tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\n        }\n        this.createContentHeader();\n        if (this.calendarMode === 'Gregorian') {\n            this.renderTemplate(tdEles, numCells, MONTH, e, value);\n        }\n        else {\n            this.islamicModule.islamicRenderTemplate(tdEles, numCells, MONTH, e, value);\n        }\n    };\n    CalendarBase.prototype.renderDays = function (currentDate, value, multiSelection, values, isTodayDate, e) {\n        var tdEles = [];\n        var cellsCount = 42;\n        var todayDate = isTodayDate ? new Date(+currentDate) : this.getDate(new Date(), this.timezone);\n        var localDate = new Date(this.checkValue(currentDate));\n        var minMaxDate;\n        var currentMonth = localDate.getMonth();\n        this.titleUpdate(currentDate, 'days');\n        var d = localDate;\n        localDate = new Date(d.getFullYear(), d.getMonth(), 0, d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds());\n        while (localDate.getDay() !== this.firstDayOfWeek) {\n            this.setStartDate(localDate, -1 * dayMilliSeconds);\n        }\n        for (var day = 0; day < cellsCount; ++day) {\n            var weekEle = this.createElement('td', { className: CELL });\n            var weekAnchor = this.createElement('span');\n            if (day % 7 === 0 && this.weekNumber) {\n                // 6 days are added to get Last day of the week and 3 days are added to get middle day of the week.\n                var numberOfDays = this.weekRule === 'FirstDay' ? 6 : (this.weekRule === 'FirstFourDayWeek' ? 3 : 0);\n                var finalDate = new Date(localDate.getFullYear(), localDate.getMonth(), (localDate.getDate() + numberOfDays));\n                weekAnchor.textContent = '' + this.getWeek(finalDate);\n                weekEle.appendChild(weekAnchor);\n                addClass([weekEle], '' + WEEKNUMBER);\n                tdEles.push(weekEle);\n            }\n            minMaxDate = new Date(+localDate);\n            localDate = this.minMaxDate(localDate);\n            var dateFormatOptions = { type: 'dateTime', skeleton: 'full' };\n            var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\n            var tdEle = this.dayCell(localDate);\n            var title = this.globalize.formatDate(localDate, { type: 'date', skeleton: 'full' });\n            var dayLink = this.createElement('span');\n            dayLink.textContent = this.globalize.formatDate(localDate, { format: 'd', type: 'date', skeleton: 'yMd' });\n            var disabled = (this.min > localDate) || (this.max < localDate);\n            if (disabled) {\n                addClass([tdEle], DISABLED);\n                addClass([tdEle], OVERLAY);\n            }\n            else {\n                dayLink.setAttribute('title', '' + title);\n            }\n            if (currentMonth !== localDate.getMonth()) {\n                addClass([tdEle], OTHERMONTH);\n            }\n            if (localDate.getDay() === 0 || localDate.getDay() === 6) {\n                addClass([tdEle], WEEKEND);\n            }\n            tdEle.appendChild(dayLink);\n            this.renderDayCellArgs = {\n                date: localDate,\n                isDisabled: false,\n                element: tdEle,\n                isOutOfRange: disabled\n            };\n            var argument = this.renderDayCellArgs;\n            this.renderDayCellEvent(argument);\n            if (argument.isDisabled) {\n                var selectDate = new Date(this.checkValue(value));\n                var argsDate = new Date(this.checkValue(argument.date));\n                if (multiSelection) {\n                    if (!isNullOrUndefined(values) && values.length > 0) {\n                        for (var index = 0; index < values.length; index++) {\n                            var localDateString = +new Date(this.globalize.formatDate(argument.date, { type: 'date', skeleton: 'yMd' }));\n                            var tempDateString = +new Date(this.globalize.formatDate(values[index], { type: 'date', skeleton: 'yMd' }));\n                            if (localDateString === tempDateString) {\n                                values.splice(index, 1);\n                                index = -1;\n                            }\n                        }\n                    }\n                }\n                else if (selectDate && +selectDate === +argsDate) {\n                    this.setProperties({ value: null }, true);\n                }\n            }\n            if (this.renderDayCellArgs.isDisabled && !tdEle.classList.contains(SELECTED)) {\n                addClass([tdEle], DISABLED);\n                addClass([tdEle], OVERLAY);\n                if (+this.renderDayCellArgs.date === +this.todayDate) {\n                    this.todayDisabled = true;\n                }\n            }\n            var otherMnthBool = tdEle.classList.contains(OTHERMONTH);\n            var disabledCls = tdEle.classList.contains(DISABLED);\n            if (!disabledCls) {\n                EventHandler.add(tdEle, 'click', this.clickHandler, this);\n            }\n            // to set the value as null while setting the disabled date onProperty change.\n            // if (args.isDisabled && +this.value === +args.date) {\n            //     this.setProperties({ value: null }, true);\n            // }\n            var currentTarget = void 0;\n            if (!isNullOrUndefined(e) && e.type == 'click') {\n                currentTarget = e.currentTarget;\n            }\n            if (multiSelection && !isNullOrUndefined(values) && !disabledCls) {\n                for (var tempValue = 0; tempValue < values.length; tempValue++) {\n                    var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n                    var formatOptions = { format: null, type: 'date', skeleton: 'short', calendar: type };\n                    var localDateString = this.globalize.formatDate(localDate, formatOptions);\n                    var tempDateString = this.globalize.formatDate(values[tempValue], formatOptions);\n                    if ((localDateString === tempDateString && this.getDateVal(localDate, values[tempValue]))\n                        || (this.getDateVal(localDate, value))) {\n                        addClass([tdEle], SELECTED);\n                    }\n                    if (!isNullOrUndefined(currentTarget) && currentTarget.innerText === tdEle.innerText && this.previousDates && currentTarget.classList.contains(SELECTED)) {\n                        removeClass([tdEle], SELECTED);\n                        this.previousDates = false;\n                        var copyValues = this.copyValues(values);\n                        for (var i = 0; i < copyValues.length; i++) {\n                            var type_1 = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n                            var formatOptions_1 = { format: null, type: 'date', skeleton: 'short', calendar: type_1 };\n                            var localDateString_1 = this.globalize.formatDate(date, formatOptions_1);\n                            var tempDateString_1 = this.globalize.formatDate(copyValues[i], formatOptions_1);\n                            if (localDateString_1 === tempDateString_1) {\n                                var index = copyValues.indexOf(copyValues[i]);\n                                copyValues.splice(index, 1);\n                            }\n                        }\n                        this.setProperties({ values: copyValues }, true);\n                    }\n                    else {\n                        this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n                    }\n                }\n                if (values.length <= 0) {\n                    this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n                }\n            }\n            else if (!disabledCls && this.getDateVal(localDate, value)) {\n                addClass([tdEle], SELECTED);\n            }\n            this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n            if (date.getFullYear() === todayDate.getFullYear() && date.getMonth() === todayDate.getMonth()\n                && date.getDate() === todayDate.getDate()) {\n                addClass([tdEle], TODAY);\n            }\n            tdEles.push(this.renderDayCellArgs.element);\n            localDate = new Date(+minMaxDate);\n            this.addDay(localDate, 1, null, this.max, this.min);\n        }\n        return tdEles;\n    };\n    CalendarBase.prototype.updateFocus = function (otherMonth, disabled, localDate, tableElement, currentDate) {\n        if (currentDate.getDate() === localDate.getDate() && !otherMonth && !disabled) {\n            addClass([tableElement], FOCUSEDDATE);\n        }\n        else {\n            // eslint-disable-next-line radix\n            if (currentDate >= this.max && parseInt(tableElement.id, 0) === +this.max && !otherMonth && !disabled) {\n                addClass([tableElement], FOCUSEDDATE);\n            }\n            // eslint-disable-next-line radix\n            if (currentDate <= this.min && parseInt(tableElement.id, 0) === +this.min && !otherMonth && !disabled) {\n                addClass([tableElement], FOCUSEDDATE);\n            }\n        }\n    };\n    CalendarBase.prototype.renderYears = function (e, value) {\n        this.removeTableHeadElement();\n        var numCells = 4;\n        var tdEles = [];\n        var valueUtil = isNullOrUndefined(value);\n        var curDate = new Date(this.checkValue(this.currentDate));\n        var mon = curDate.getMonth();\n        var yr = curDate.getFullYear();\n        var localDate = curDate;\n        var curYrs = localDate.getFullYear();\n        var minYr = new Date(this.checkValue(this.min)).getFullYear();\n        var minMonth = new Date(this.checkValue(this.min)).getMonth();\n        var maxYr = new Date(this.checkValue(this.max)).getFullYear();\n        var maxMonth = new Date(this.checkValue(this.max)).getMonth();\n        localDate.setMonth(0);\n        this.titleUpdate(this.currentDate, 'months');\n        localDate.setDate(1);\n        for (var month = 0; month < 12; ++month) {\n            var tdEle = this.dayCell(localDate);\n            var dayLink = this.createElement('span');\n            var localMonth = (value && (value).getMonth() === localDate.getMonth());\n            var select = (value && (value).getFullYear() === yr && localMonth);\n            dayLink.textContent = this.toCapitalize(this.globalize.formatDate(localDate, {\n                format: null, type: 'dateTime', skeleton: 'MMM'\n            }));\n            if ((this.min && (curYrs < minYr || (month < minMonth && curYrs === minYr))) || (this.max && (curYrs > maxYr || (month > maxMonth && curYrs >= maxYr)))) {\n                addClass([tdEle], DISABLED);\n            }\n            else if (!valueUtil && select) {\n                addClass([tdEle], SELECTED);\n            }\n            else {\n                if (localDate.getMonth() === mon && this.currentDate.getMonth() === mon) {\n                    addClass([tdEle], FOCUSEDDATE);\n                }\n            }\n            localDate.setDate(1);\n            localDate.setMonth(localDate.getMonth() + 1);\n            if (!tdEle.classList.contains(DISABLED)) {\n                EventHandler.add(tdEle, 'click', this.clickHandler, this);\n            }\n            tdEle.appendChild(dayLink);\n            tdEles.push(tdEle);\n        }\n        this.renderTemplate(tdEles, numCells, YEAR, e, value);\n    };\n    CalendarBase.prototype.renderDecades = function (e, value) {\n        this.removeTableHeadElement();\n        var numCells = 4;\n        var yearCell = 12;\n        var tdEles = [];\n        var localDate = new Date(this.checkValue(this.currentDate));\n        localDate.setMonth(0);\n        localDate.setDate(1);\n        var localYr = localDate.getFullYear();\n        var startYr = new Date(localDate.setFullYear((localYr - localYr % 10)));\n        var endYr = new Date(localDate.setFullYear((localYr - localYr % 10 + (10 - 1))));\n        var startFullYr = startYr.getFullYear();\n        var endFullYr = endYr.getFullYear();\n        var startHdrYr = this.globalize.formatDate(startYr, {\n            format: null, type: 'dateTime', skeleton: 'y'\n        });\n        var endHdrYr = this.globalize.formatDate(endYr, { format: null, type: 'dateTime', skeleton: 'y' });\n        this.headerTitleElement.textContent = startHdrYr + ' - ' + (endHdrYr);\n        var start = new Date(localYr - (localYr % 10) - 1, 0, 1);\n        var startYear = start.getFullYear();\n        for (var rowIterator = 0; rowIterator < yearCell; ++rowIterator) {\n            var year = startYear + rowIterator;\n            localDate.setFullYear(year);\n            var tdEle = this.dayCell(localDate);\n            var dayLink = this.createElement('span');\n            dayLink.textContent = this.globalize.formatDate(localDate, {\n                format: null, type: 'dateTime', skeleton: 'y'\n            });\n            if ((year < startFullYr) || (year > endFullYr)) {\n                addClass([tdEle], OTHERDECADE);\n                if (!isNullOrUndefined(value) && localDate.getFullYear() === (value).getFullYear()) {\n                    addClass([tdEle], SELECTED);\n                }\n                if (year < new Date(this.checkValue(this.min)).getFullYear() ||\n                    year > new Date(this.checkValue(this.max)).getFullYear()) {\n                    addClass([tdEle], DISABLED);\n                }\n            }\n            else if (year < new Date(this.checkValue(this.min)).getFullYear() ||\n                year > new Date(this.checkValue(this.max)).getFullYear()) {\n                addClass([tdEle], DISABLED);\n            }\n            else if (!isNullOrUndefined(value) && localDate.getFullYear() === (value).getFullYear()) {\n                addClass([tdEle], SELECTED);\n            }\n            else {\n                if (localDate.getFullYear() === this.currentDate.getFullYear() && !tdEle.classList.contains(DISABLED)) {\n                    addClass([tdEle], FOCUSEDDATE);\n                }\n            }\n            if (!tdEle.classList.contains(DISABLED)) {\n                EventHandler.add(tdEle, 'click', this.clickHandler, this);\n            }\n            tdEle.appendChild(dayLink);\n            tdEles.push(tdEle);\n        }\n        this.renderTemplate(tdEles, numCells, 'e-decade', e, value);\n    };\n    CalendarBase.prototype.dayCell = function (localDate) {\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n        var dateFormatOptions = { skeleton: 'full', type: 'dateTime', calendar: type };\n        var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\n        var value = date.valueOf();\n        var attrs = {\n            className: CELL, attrs: { 'id': '' + getUniqueID('' + value), 'aria-selected': 'false' }\n        };\n        return this.createElement('td', attrs);\n    };\n    CalendarBase.prototype.firstDay = function (date) {\n        var collection = this.currentView() !== 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '') :\n            this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '');\n        if (collection.length) {\n            for (var i = 0; i < collection.length; i++) {\n                if (!collection[i].classList.contains(DISABLED)) {\n                    // eslint-disable-next-line radix\n                    date = new Date(parseInt(collection[i].id, 0));\n                    break;\n                }\n            }\n        }\n        return date;\n    };\n    CalendarBase.prototype.lastDay = function (date, view) {\n        var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n        if (view !== 2) {\n            var timeOffset = Math.abs(lastDate.getTimezoneOffset() - this.firstDay(date).getTimezoneOffset());\n            if (timeOffset) {\n                lastDate.setHours(this.firstDay(date).getHours() + (timeOffset / 60));\n            }\n            return this.findLastDay(lastDate);\n        }\n        else {\n            return this.findLastDay(this.firstDay(lastDate));\n        }\n    };\n    CalendarBase.prototype.checkDateValue = function (value) {\n        return (!isNullOrUndefined(value) && value instanceof Date && !isNaN(+value)) ? value : null;\n    };\n    CalendarBase.prototype.findLastDay = function (date) {\n        var collection = this.currentView() === 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '') :\n            this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '');\n        if (collection.length) {\n            for (var i = collection.length - 1; i >= 0; i--) {\n                if (!collection[i].classList.contains(DISABLED)) {\n                    // eslint-disable-next-line radix\n                    date = new Date(parseInt(collection[i].id, 0));\n                    break;\n                }\n            }\n        }\n        return date;\n    };\n    CalendarBase.prototype.removeTableHeadElement = function () {\n        if (this.getModuleName() === 'calendar') {\n            if (!isNullOrUndefined(this.element.querySelectorAll('.e-content table thead')[0])) {\n                detach(this.tableHeadElement);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content table thead')[0])) {\n                detach(this.tableHeadElement);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CalendarBase.prototype.renderTemplate = function (elements, count, classNm, e, value) {\n        var view = this.getViewNumber(this.currentView());\n        var trEle;\n        this.tableBodyElement = this.createElement('tbody');\n        this.table.appendChild(this.tableBodyElement);\n        removeClass([this.contentElement, this.headerElement], [MONTH, DECADE, YEAR]);\n        addClass([this.contentElement, this.headerElement], [classNm]);\n        var weekNumCell = 41;\n        var numberCell = 35;\n        var otherMonthCell = 6;\n        var row = count;\n        var rowIterator = 0;\n        for (var dayCell = 0; dayCell < elements.length / count; ++dayCell) {\n            trEle = this.createElement('tr');\n            for (rowIterator = 0 + rowIterator; rowIterator < row; rowIterator++) {\n                if (!elements[rowIterator].classList.contains('e-week-number') && !isNullOrUndefined(elements[rowIterator].children[0])) {\n                    addClass([elements[rowIterator].children[0]], [LINK]);\n                    rippleEffect(elements[rowIterator].children[0], {\n                        duration: 600,\n                        isCenterRipple: true\n                    });\n                }\n                trEle.appendChild(elements[rowIterator]);\n                if (this.weekNumber && rowIterator === otherMonthCell + 1 && elements[otherMonthCell + 1].classList.contains(OTHERMONTH)) {\n                    addClass([trEle], OTHERMONTHROW);\n                }\n                if (!this.weekNumber && rowIterator === otherMonthCell && elements[otherMonthCell].classList.contains(OTHERMONTH)) {\n                    addClass([trEle], OTHERMONTHROW);\n                }\n                if (this.weekNumber) {\n                    if (rowIterator === weekNumCell && elements[weekNumCell].classList.contains(OTHERMONTH)) {\n                        addClass([trEle], OTHERMONTHROW);\n                    }\n                }\n                else {\n                    if (rowIterator === numberCell && elements[numberCell].classList.contains(OTHERMONTH)) {\n                        addClass([trEle], OTHERMONTHROW);\n                    }\n                }\n            }\n            row = row + count;\n            rowIterator = rowIterator + 0;\n            this.tableBodyElement.appendChild(trEle);\n        }\n        this.table.querySelector('tbody').className = this.effect;\n        if (this.calendarMode === 'Gregorian') {\n            this.iconHandler();\n        }\n        else {\n            this.islamicModule.islamicIconHandler();\n        }\n        if (view !== this.getViewNumber(this.currentView()) || (view === 0 && view !== this.getViewNumber(this.currentView()))) {\n            this.navigateHandler(e);\n        }\n        this.setAriaActiveDescendant();\n    };\n    CalendarBase.prototype.clickHandler = function (e, value) {\n        this.clickEventEmitter(e);\n        var eve = e.currentTarget;\n        var view = this.getViewNumber(this.currentView());\n        if (eve.classList.contains(OTHERMONTH)) {\n            this.contentClick(e, 0, null, value);\n        }\n        else if (view === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n            this.contentClick(e, 1, null, value);\n        }\n        else if (2 === view) {\n            this.contentClick(e, 1, null, value);\n        }\n        else if (!eve.classList.contains(OTHERMONTH) && view === 0) {\n            this.selectDate(e, this.getIdValue(e, null), null);\n        }\n        else {\n            this.contentClick(e, 0, eve, value);\n        }\n        if (this.getModuleName() === 'calendar') {\n            this.table.focus();\n        }\n    };\n    // Content click event handler required for extended components\n    CalendarBase.prototype.clickEventEmitter = function (e) {\n        e.preventDefault();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CalendarBase.prototype.contentClick = function (e, view, element, value) {\n        var currentView = this.getViewNumber(this.currentView());\n        var d = this.getIdValue(e, element);\n        switch (view) {\n            case 0:\n                if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n                    detach(this.tableBodyElement);\n                    this.currentDate = d;\n                    this.effect = ZOOMIN;\n                    this.renderMonths(e);\n                }\n                else {\n                    if (this.calendarMode === 'Gregorian') {\n                        this.currentDate.setMonth(d.getMonth());\n                        if (d.getMonth() > 0 && this.currentDate.getMonth() !== d.getMonth()) {\n                            this.currentDate.setDate(0);\n                        }\n                        this.currentDate.setFullYear(d.getFullYear());\n                    }\n                    else {\n                        this.currentDate = d;\n                    }\n                    this.effect = ZOOMIN;\n                    detach(this.tableBodyElement);\n                    this.renderMonths(e);\n                }\n                break;\n            case 1:\n                if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n                    this.selectDate(e, d, null);\n                }\n                else {\n                    if (this.calendarMode === 'Gregorian') {\n                        this.currentDate.setFullYear(d.getFullYear());\n                    }\n                    else {\n                        this.islamicPreviousHeader = this.headerElement.textContent;\n                        var islamicDate = this.islamicModule.getIslamicDate(d);\n                        this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month, 1);\n                    }\n                    this.effect = ZOOMIN;\n                    detach(this.tableBodyElement);\n                    this.renderYears(e);\n                }\n        }\n    };\n    CalendarBase.prototype.switchView = function (view, e, multiSelection, isCustomDate) {\n        switch (view) {\n            case 0:\n                detach(this.tableBodyElement);\n                this.renderMonths(e, null, isCustomDate);\n                if (multiSelection && !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0])) {\n                    this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\n                }\n                break;\n            case 1:\n                detach(this.tableBodyElement);\n                this.renderYears(e);\n                break;\n            case 2:\n                detach(this.tableBodyElement);\n                this.renderDecades(e);\n        }\n    };\n    /**\n     * To get component name\n     *\n     * @returns {string} Returns the component name.\n     * @private\n     */\n    CalendarBase.prototype.getModuleName = function () {\n        return 'calendar';\n    };\n    /**\n     *\n     * @returns {void}\n\n     */\n    CalendarBase.prototype.requiredModules = function () {\n        var modules = [];\n        if (this) {\n            modules.push({ args: [this], member: 'islamic' });\n        }\n        return modules;\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the properties to be maintained upon browser refresh.\n     *\n     * @returns {string}\n     */\n    CalendarBase.prototype.getPersistData = function () {\n        var keyEntity = ['value'];\n        return this.addOnPersist(keyEntity);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {CalendarBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {CalendarBaseModel} oldProp - Returns the previous property value of the component.\n     * @param {boolean} multiSelection - - Specifies whether multiple date selection is enabled or not.\n     * @param {Date[]} values - Specifies the dates.\n     * @returns {void}\n     * @private\n     */\n    CalendarBase.prototype.onPropertyChanged = function (newProp, oldProp, multiSelection, values) {\n        this.effect = '';\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        if (this.getModuleName() === 'calendar') {\n                            this.element.classList.add('e-rtl');\n                        }\n                        else {\n                            this.calendarElement.classList.add('e-rtl');\n                        }\n                    }\n                    else {\n                        if (this.getModuleName() === 'calendar') {\n                            this.element.classList.remove('e-rtl');\n                        }\n                        else {\n                            this.calendarElement.classList.remove('e-rtl');\n                        }\n                    }\n                    break;\n                case 'dayHeaderFormat':\n                    this.getCultureValues();\n                    if (this.getModuleName() !== 'datepicker') {\n                        this.createContentHeader();\n                    }\n                    else if (this.calendarElement) {\n                        this.createContentHeader();\n                    }\n                    this.adjustLongHeaderSize();\n                    break;\n                case 'min':\n                case 'max':\n                    this.rangeValidation(this.min, this.max);\n                    if (prop === 'min') {\n                        this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(newProp.min))) }, true);\n                    }\n                    else {\n                        this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(newProp.max))) }, true);\n                    }\n                    this.setProperties({ start: this.currentView() }, true);\n                    if (this.tableBodyElement) {\n                        detach(this.tableBodyElement);\n                    }\n                    this.minMaxUpdate();\n                    if (multiSelection) {\n                        this.validateValues(multiSelection, values);\n                    }\n                    if (this.getModuleName() !== 'datepicker') {\n                        this.createContentBody();\n                    }\n                    else if (this.calendarElement) {\n                        this.createContentBody();\n                    }\n                    if ((this.todayDate < this.min || this.max < this.todayDate) && (this.footer) && (this.todayElement)) {\n                        detach(this.todayElement);\n                        detach(this.footer);\n                        this.todayElement = this.footer = null;\n                        this.createContentFooter();\n                    }\n                    else {\n                        if ((this.footer) && (this.todayElement) && this.todayElement.classList.contains('e-disabled')) {\n                            removeClass([this.todayElement], DISABLED);\n                            detach(this.todayElement);\n                            detach(this.footer);\n                            this.todayElement = this.footer = null;\n                            this.createContentFooter();\n                        }\n                    }\n                    break;\n                case 'start':\n                case 'depth':\n                case 'weekNumber':\n                case 'firstDayOfWeek':\n                case 'weekRule':\n                    this.checkView();\n                    if (this.getModuleName() !== 'datepicker') {\n                        this.createContentHeader();\n                        this.createContentBody();\n                    }\n                    else if (this.calendarElement) {\n                        this.createContentHeader();\n                        this.createContentBody();\n                    }\n                    break;\n                case 'locale':\n                    this.globalize = new Internationalization(this.locale);\n                    if (this.getModuleName() !== 'datepicker') {\n                        this.createContentHeader();\n                        this.createContentBody();\n                    }\n                    else if (this.calendarElement) {\n                        this.createContentHeader();\n                        this.createContentBody();\n                    }\n                    this.l10.setLocale(this.locale);\n                    this.updateFooter();\n                    break;\n                case 'showTodayButton':\n                    if (newProp.showTodayButton) {\n                        this.createContentFooter();\n                    }\n                    else {\n                        if (!isNullOrUndefined(this.todayElement) && !isNullOrUndefined(this.footer)) {\n                            detach(this.todayElement);\n                            detach(this.footer);\n                            this.todayElement = this.footer = undefined;\n                        }\n                    }\n                    this.setProperties({ showTodayButton: newProp.showTodayButton }, true);\n                    break;\n            }\n        }\n    };\n    /**\n     * values property updated with considered disabled dates of the calendar.\n     *\n     * @param {boolean} multiSelection - Specifies whether multiple date selection is enabled.\n     * @param {Date[]} values - Specifies the dates to validate.\n     * @returns {void}\n     */\n    CalendarBase.prototype.validateValues = function (multiSelection, values) {\n        if (multiSelection && !isNullOrUndefined(values) && values.length > 0) {\n            var copyValues = this.copyValues(values);\n            for (var skipIndex = 0; skipIndex < copyValues.length; skipIndex++) {\n                var tempValue = copyValues[skipIndex];\n                var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n                var tempValueString = void 0;\n                if (this.calendarMode === 'Gregorian') {\n                    tempValueString = this.globalize.formatDate(tempValue, { type: 'date', skeleton: 'yMd' });\n                }\n                else {\n                    tempValueString = this.globalize.formatDate(tempValue, { type: 'dateTime', skeleton: 'full', calendar: 'islamic' });\n                }\n                var minFormatOption = { type: 'date', skeleton: 'yMd', calendar: type };\n                var minStringValue = this.globalize.formatDate(this.min, minFormatOption);\n                var minString = minStringValue;\n                var maxFormatOption = { type: 'date', skeleton: 'yMd', calendar: type };\n                var maxStringValue = this.globalize.formatDate(this.max, maxFormatOption);\n                var maxString = maxStringValue;\n                if (+new Date(tempValueString) < +new Date(minString) ||\n                    +new Date(tempValueString) > +new Date(maxString)) {\n                    copyValues.splice(skipIndex, 1);\n                    skipIndex = -1;\n                }\n            }\n            this.setProperties({ values: copyValues }, true);\n        }\n    };\n    CalendarBase.prototype.setValueUpdate = function () {\n        if (!isNullOrUndefined(this.tableBodyElement)) {\n            detach(this.tableBodyElement);\n            this.setProperties({ start: this.currentView() }, true);\n            this.createContentBody();\n        }\n    };\n    CalendarBase.prototype.copyValues = function (values) {\n        var copyValues = [];\n        if (!isNullOrUndefined(values) && values.length > 0) {\n            for (var index = 0; index < values.length; index++) {\n                copyValues.push(new Date(+values[index]));\n            }\n        }\n        return copyValues;\n    };\n    CalendarBase.prototype.titleUpdate = function (date, view) {\n        var globalize = new Internationalization(this.locale);\n        var dayFormatOptions;\n        var monthFormatOptions;\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n        if (this.calendarMode === 'Gregorian') {\n            dayFormatOptions = globalize.formatDate(date, { type: 'dateTime', skeleton: 'yMMMM', calendar: type });\n            monthFormatOptions = globalize.formatDate(date, {\n                format: null, type: 'dateTime', skeleton: 'y', calendar: type\n            });\n        }\n        else {\n            dayFormatOptions = globalize.formatDate(date, { type: 'dateTime', format: 'MMMM y', calendar: type });\n            monthFormatOptions = globalize.formatDate(date, { type: 'dateTime', format: 'y', calendar: type });\n        }\n        switch (view) {\n            case 'days':\n                this.headerTitleElement.textContent = this.toCapitalize(dayFormatOptions);\n                break;\n            case 'months':\n                this.headerTitleElement.textContent = monthFormatOptions;\n        }\n    };\n    CalendarBase.prototype.setActiveDescendant = function () {\n        var id;\n        var focusedEle = this.tableBodyElement.querySelector('tr td.e-focused-date');\n        var selectedEle = this.tableBodyElement.querySelector('tr td.e-selected');\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n        var title;\n        var view = this.currentView();\n        if (view === 'Month') {\n            title = this.globalize.formatDate(this.currentDate, { type: 'date', skeleton: 'full', calendar: type });\n        }\n        else if (view === 'Year') {\n            if (type !== 'islamic') {\n                title = this.globalize.formatDate(this.currentDate, { type: 'date', skeleton: 'yMMMM', calendar: type });\n            }\n            else {\n                title = this.globalize.formatDate(this.currentDate, { type: 'date', skeleton: 'GyMMM', calendar: type });\n            }\n        }\n        else {\n            title = this.globalize.formatDate(this.currentDate, {\n                format: null, type: 'date', skeleton: 'y', calendar: type\n            });\n        }\n        if (selectedEle || focusedEle) {\n            if (!isNullOrUndefined(selectedEle)) {\n                selectedEle.setAttribute('aria-selected', 'true');\n            }\n            (focusedEle || selectedEle).setAttribute('aria-label', title);\n            id = (focusedEle || selectedEle).getAttribute('id');\n        }\n        return id;\n    };\n    CalendarBase.prototype.iconHandler = function () {\n        new Date(this.checkValue(this.currentDate)).setDate(1);\n        switch (this.currentView()) {\n            case 'Month':\n                this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n                this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n                break;\n            case 'Year':\n                this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n                this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n                break;\n            case 'Decade':\n                this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n                this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n        }\n    };\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    CalendarBase.prototype.destroy = function () {\n        if (this.getModuleName() === 'calendar' && this.element) {\n            removeClass([this.element], [ROOT]);\n        }\n        else {\n            if (this.calendarElement && this.element) {\n                removeClass([this.element], [ROOT]);\n            }\n        }\n        if (this.getModuleName() === 'calendar' && this.element) {\n            EventHandler.remove(this.headerTitleElement, 'click', this.navigateTitle);\n            if (this.todayElement) {\n                EventHandler.remove(this.todayElement, 'click', this.todayButtonClick);\n            }\n            this.previousIconHandler(true);\n            this.nextIconHandler(true);\n            this.keyboardModule.destroy();\n            this.element.removeAttribute('data-role');\n            if (!isNullOrUndefined(this.calendarEleCopy.getAttribute('tabindex'))) {\n                this.element.setAttribute('tabindex', this.tabIndex);\n            }\n            else {\n                this.element.removeAttribute('tabindex');\n            }\n        }\n        if (this.element) {\n            this.element.innerHTML = '';\n        }\n        _super.prototype.destroy.call(this);\n    };\n    CalendarBase.prototype.title = function (e) {\n        var currentView = this.getViewNumber(this.currentView());\n        this.effect = ZOOMIN;\n        this.switchView(++currentView, e);\n    };\n    CalendarBase.prototype.getViewNumber = function (stringVal) {\n        if (stringVal === 'Month') {\n            return 0;\n        }\n        else if (stringVal === 'Year') {\n            return 1;\n        }\n        else {\n            return 2;\n        }\n    };\n    CalendarBase.prototype.navigateTitle = function (e) {\n        e.preventDefault();\n        this.title(e);\n        if (this.getModuleName() === 'calendar') {\n            this.table.focus();\n        }\n    };\n    CalendarBase.prototype.previous = function () {\n        this.effect = '';\n        var currentView = this.getViewNumber(this.currentView());\n        switch (this.currentView()) {\n            case 'Month':\n                this.addMonths(this.currentDate, -1);\n                this.switchView(currentView);\n                break;\n            case 'Year':\n                this.addYears(this.currentDate, -1);\n                this.switchView(currentView);\n                break;\n            case 'Decade':\n                this.addYears(this.currentDate, -10);\n                this.switchView(currentView);\n                break;\n        }\n    };\n    CalendarBase.prototype.navigatePrevious = function (e) {\n        e.preventDefault();\n        if (this.calendarMode === 'Gregorian') {\n            this.previous();\n        }\n        else {\n            this.islamicModule.islamicPrevious();\n        }\n        this.triggerNavigate(e);\n        if (this.getModuleName() === 'calendar') {\n            this.table.focus();\n        }\n    };\n    CalendarBase.prototype.next = function () {\n        this.effect = '';\n        var currentView = this.getViewNumber(this.currentView());\n        switch (this.currentView()) {\n            case 'Month':\n                this.addMonths(this.currentDate, 1);\n                this.switchView(currentView);\n                break;\n            case 'Year':\n                this.addYears(this.currentDate, 1);\n                this.switchView(currentView);\n                break;\n            case 'Decade':\n                this.addYears(this.currentDate, 10);\n                this.switchView(currentView);\n                break;\n        }\n    };\n    CalendarBase.prototype.navigateNext = function (eve) {\n        eve.preventDefault();\n        if (this.calendarMode === 'Gregorian') {\n            this.next();\n        }\n        else {\n            this.islamicModule.islamicNext();\n        }\n        this.triggerNavigate(eve);\n        if (this.getModuleName() === 'calendar') {\n            this.table.focus();\n        }\n    };\n    /**\n     * This method is used to navigate to the month/year/decade view of the Calendar.\n     *\n     * @param {string} view - Specifies the view of the Calendar.\n     * @param {Date} date - Specifies the focused date in a view.\n     * @param {boolean} isCustomDate - Specifies whether the calendar is rendered with custom today date or not.\n     * @returns {void}\n     */\n    CalendarBase.prototype.navigateTo = function (view, date, isCustomDate) {\n        if (+date >= +this.min && +date <= +this.max) {\n            this.currentDate = date;\n        }\n        if (+date <= +this.min) {\n            this.currentDate = new Date(this.checkValue(this.min));\n        }\n        if (+date >= +this.max) {\n            this.currentDate = new Date(this.checkValue(this.max));\n        }\n        if ((this.getViewNumber(this.depth) >= this.getViewNumber(view))) {\n            if ((this.getViewNumber(this.depth) <= this.getViewNumber(this.start))\n                || this.getViewNumber(this.depth) === this.getViewNumber(view)) {\n                view = this.depth;\n            }\n        }\n        this.switchView(this.getViewNumber(view), null, null, isCustomDate);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the current view of the Calendar.\n     *\n     * @returns {string}\n     */\n    CalendarBase.prototype.currentView = function () {\n        if (this.contentElement.classList.contains(YEAR)) {\n            return 'Year';\n        }\n        else if (this.contentElement.classList.contains(DECADE)) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    CalendarBase.prototype.getDateVal = function (date, value) {\n        return (!isNullOrUndefined(value) && date.getDate() === (value).getDate()\n            && date.getMonth() === (value).getMonth() && date.getFullYear() === (value).getFullYear());\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CalendarBase.prototype.getCultureObjects = function (ld, c) {\n        var gregorianFormat = '.dates.calendars.gregorian.days.format.' + this.dayHeaderFormat.toLowerCase();\n        var islamicFormat = '.dates.calendars.islamic.days.format.' + this.dayHeaderFormat.toLowerCase();\n        var mainVal = 'main.';\n        if (this.calendarMode === 'Gregorian') {\n            return getValue(mainVal + '' + this.locale + gregorianFormat, ld);\n        }\n        else {\n            return getValue('main.' + '' + this.locale + islamicFormat, ld);\n        }\n    };\n    CalendarBase.prototype.getWeek = function (d) {\n        var currentDate = new Date(this.checkValue(d)).valueOf();\n        var date = new Date(d.getFullYear(), 0, 1).valueOf();\n        return Math.ceil((((currentDate - date) + dayMilliSeconds) / dayMilliSeconds) / 7);\n    };\n    CalendarBase.prototype.setStartDate = function (date, time) {\n        var tzOffset = date.getTimezoneOffset();\n        var d = new Date(date.getTime() + time);\n        var tzOffsetDiff = d.getTimezoneOffset() - tzOffset;\n        date.setTime(d.getTime() + tzOffsetDiff * minutesMilliSeconds);\n    };\n    CalendarBase.prototype.addMonths = function (date, i) {\n        if (this.calendarMode === 'Gregorian') {\n            var day = date.getDate();\n            date.setDate(1);\n            date.setMonth(date.getMonth() + i);\n            date.setDate(Math.min(day, this.getMaxDays(date)));\n        }\n        else {\n            var islamicDate = this.islamicModule.getIslamicDate(date);\n            this.currentDate = this.islamicModule.toGregorian(islamicDate.year, (islamicDate.month) + i, 1);\n        }\n    };\n    CalendarBase.prototype.addYears = function (date, i) {\n        if (this.calendarMode === 'Gregorian') {\n            var day = date.getDate();\n            date.setDate(1);\n            date.setFullYear(date.getFullYear() + i);\n            date.setDate(Math.min(day, this.getMaxDays(date)));\n        }\n        else {\n            var islamicDate = this.islamicModule.getIslamicDate(date);\n            this.currentDate = this.islamicModule.toGregorian(islamicDate.year + i, (islamicDate.month), 1);\n        }\n    };\n    CalendarBase.prototype.getIdValue = function (e, element) {\n        var eve;\n        if (e) {\n            eve = e.currentTarget;\n        }\n        else {\n            eve = element;\n        }\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n        var dateFormatOptions = { type: 'dateTime', skeleton: 'full', calendar: type };\n        // eslint-disable-next-line radix\n        var dateString = this.globalize.formatDate(new Date(parseInt('' + eve.getAttribute('id'), 0)), dateFormatOptions);\n        var date = this.globalize.parseDate(dateString, dateFormatOptions);\n        var value = date.valueOf() - date.valueOf() % 1000;\n        return new Date(value);\n        //return this.globalize.parseDate(dateString, dateFormatOptions);\n    };\n    CalendarBase.prototype.adjustLongHeaderSize = function () {\n        removeClass([this.element], DAYHEADERLONG);\n        if (this.dayHeaderFormat === 'Wide') {\n            addClass([this.getModuleName() === 'calendar' ? this.element : this.calendarElement], DAYHEADERLONG);\n        }\n    };\n    CalendarBase.prototype.selectDate = function (e, date, node, multiSelection, values) {\n        var element = node || e.currentTarget;\n        this.isDateSelected = false;\n        if (this.currentView() === 'Decade') {\n            this.setDateDecade(this.currentDate, date.getFullYear());\n        }\n        else if (this.currentView() === 'Year') {\n            this.setDateYear(this.currentDate, date);\n        }\n        else {\n            if (multiSelection && !this.checkPresentDate(date, values)) {\n                var copyValues = this.copyValues(values);\n                if (!isNullOrUndefined(values) && copyValues.length > 0) {\n                    copyValues.push(new Date(this.checkValue(date)));\n                    this.setProperties({ values: copyValues }, true);\n                    this.setProperties({ value: values[values.length - 1] }, true);\n                }\n                else {\n                    this.setProperties({ values: [new Date(this.checkValue(date))] }, true);\n                }\n            }\n            else {\n                this.setProperties({ value: new Date(this.checkValue(date)) }, true);\n            }\n            this.currentDate = new Date(this.checkValue(date));\n        }\n        var tableBodyElement = closest(element, '.' + ROOT);\n        if (isNullOrUndefined(tableBodyElement)) {\n            tableBodyElement = this.tableBodyElement;\n        }\n        if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + SELECTED))) {\n            removeClass([tableBodyElement.querySelector('.' + SELECTED)], SELECTED);\n        }\n        if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + FOCUSEDDATE))) {\n            removeClass([tableBodyElement.querySelector('.' + FOCUSEDDATE)], FOCUSEDDATE);\n        }\n        if (multiSelection) {\n            var copyValues = this.copyValues(values);\n            var collection = Array.prototype.slice.call(this.tableBodyElement.querySelectorAll('td'));\n            for (var index = 0; index < collection.length; index++) {\n                var tempElement = tableBodyElement.querySelectorAll('td' + '.' + FOCUSEDDATE)[0];\n                var selectedElement = tableBodyElement.querySelectorAll('td' + '.' + SELECTED)[0];\n                if (collection[index] === tempElement) {\n                    removeClass([collection[index]], FOCUSEDDATE);\n                }\n                if (collection[index] === selectedElement &&\n                    !this.checkPresentDate(new Date(parseInt(selectedElement.getAttribute('id').split('_')[0], 10)), values)) {\n                    removeClass([collection[index]], SELECTED);\n                }\n            }\n            if (element.classList.contains(SELECTED)) {\n                removeClass([element], SELECTED);\n                for (var i = 0; i < copyValues.length; i++) {\n                    var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n                    var formatOptions = { format: null, type: 'date', skeleton: 'short', calendar: type };\n                    var localDateString = this.globalize.formatDate(date, formatOptions);\n                    var tempDateString = this.globalize.formatDate(copyValues[i], formatOptions);\n                    if (localDateString === tempDateString) {\n                        var index = copyValues.indexOf(copyValues[i]);\n                        copyValues.splice(index, 1);\n                        addClass([element], FOCUSEDDATE);\n                    }\n                }\n                this.setProperties({ values: copyValues }, true);\n            }\n            else {\n                addClass([element], SELECTED);\n            }\n        }\n        else {\n            addClass([element], SELECTED);\n        }\n        this.isDateSelected = true;\n    };\n    CalendarBase.prototype.checkPresentDate = function (dates, values) {\n        var previousValue = false;\n        if (!isNullOrUndefined(values)) {\n            for (var checkPrevious = 0; checkPrevious < values.length; checkPrevious++) {\n                var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\n                var localDateString = this.globalize.formatDate(dates, {\n                    format: null, type: 'date', skeleton: 'short', calendar: type\n                });\n                var tempDateString = this.globalize.formatDate(values[checkPrevious], {\n                    format: null, type: 'date', skeleton: 'short', calendar: type\n                });\n                if (localDateString === tempDateString) {\n                    previousValue = true;\n                }\n            }\n        }\n        return previousValue;\n    };\n    CalendarBase.prototype.setAriaActiveDescendant = function () {\n        attributes(this.table, {\n            'aria-activedescendant': '' + this.setActiveDescendant()\n        });\n    };\n    CalendarBase.prototype.previousIconHandler = function (disabled) {\n        if (disabled) {\n            EventHandler.remove(this.previousIcon, 'click', this.navigatePreviousHandler);\n            addClass([this.previousIcon], '' + DISABLED);\n            addClass([this.previousIcon], '' + OVERLAY);\n            this.previousIcon.setAttribute('aria-disabled', 'true');\n        }\n        else {\n            EventHandler.add(this.previousIcon, 'click', this.navigatePreviousHandler);\n            removeClass([this.previousIcon], '' + DISABLED);\n            removeClass([this.previousIcon], '' + OVERLAY);\n            this.previousIcon.setAttribute('aria-disabled', 'false');\n        }\n    };\n    CalendarBase.prototype.renderDayCellEvent = function (args) {\n        extend(this.renderDayCellArgs, { name: 'renderDayCell' });\n        this.trigger('renderDayCell', args);\n    };\n    CalendarBase.prototype.navigatedEvent = function (eve) {\n        extend(this.navigatedArgs, { name: 'navigated', event: eve });\n        this.trigger('navigated', this.navigatedArgs);\n    };\n    CalendarBase.prototype.triggerNavigate = function (event) {\n        this.navigatedArgs = { view: this.currentView(), date: this.currentDate };\n        this.navigatedEvent(event);\n    };\n    CalendarBase.prototype.nextIconHandler = function (disabled) {\n        if (disabled) {\n            EventHandler.remove(this.nextIcon, 'click', this.navigateNextHandler);\n            addClass([this.nextIcon], DISABLED);\n            addClass([this.nextIcon], OVERLAY);\n            this.nextIcon.setAttribute('aria-disabled', 'true');\n        }\n        else {\n            EventHandler.add(this.nextIcon, 'click', this.navigateNextHandler);\n            removeClass([this.nextIcon], DISABLED);\n            removeClass([this.nextIcon], OVERLAY);\n            this.nextIcon.setAttribute('aria-disabled', 'false');\n        }\n    };\n    CalendarBase.prototype.compare = function (startDate, endDate, modifier) {\n        var start = endDate.getFullYear();\n        var end;\n        var result;\n        end = start;\n        result = 0;\n        if (modifier) {\n            start = start - start % modifier;\n            end = start - start % modifier + modifier - 1;\n        }\n        if (startDate.getFullYear() > end) {\n            result = 1;\n        }\n        else if (startDate.getFullYear() < start) {\n            result = -1;\n        }\n        return result;\n    };\n    CalendarBase.prototype.isMinMaxRange = function (date) {\n        return +date >= +this.min && +date <= +this.max;\n    };\n    CalendarBase.prototype.isMonthYearRange = function (date) {\n        if (this.calendarMode === 'Gregorian') {\n            return date.getMonth() >= this.min.getMonth()\n                && date.getFullYear() >= this.min.getFullYear()\n                && date.getMonth() <= this.max.getMonth()\n                && date.getFullYear() <= this.max.getFullYear();\n        }\n        else {\n            var islamicDate = this.islamicModule.getIslamicDate(date);\n            return islamicDate.month >= (this.islamicModule.getIslamicDate(new Date(1944, 1, 18))).month\n                && islamicDate.year >= (this.islamicModule.getIslamicDate(new Date(1944, 1, 18))).year\n                && islamicDate.month <= (this.islamicModule.getIslamicDate(new Date(2069, 1, 16))).month\n                && islamicDate.year <= (this.islamicModule.getIslamicDate(new Date(2069, 1, 16))).year;\n        }\n    };\n    CalendarBase.prototype.compareYear = function (start, end) {\n        return this.compare(start, end, 0);\n    };\n    CalendarBase.prototype.compareDecade = function (start, end) {\n        return this.compare(start, end, 10);\n    };\n    CalendarBase.prototype.shiftArray = function (array, i) {\n        return array.slice(i).concat(array.slice(0, i));\n    };\n    CalendarBase.prototype.addDay = function (date, i, e, max, min) {\n        var column = i;\n        var value = new Date(+date);\n        if (!isNullOrUndefined(this.tableBodyElement) && !isNullOrUndefined(e)) {\n            while (this.findNextTD(new Date(+date), column, max, min)) {\n                column += i;\n            }\n            var rangeValue = new Date(value.setDate(value.getDate() + column));\n            column = (+rangeValue > +max || +rangeValue < +min) ? column === i ? i - i : i : column;\n        }\n        date.setDate(date.getDate() + column);\n    };\n    CalendarBase.prototype.findNextTD = function (date, column, max, min) {\n        var value = new Date(date.setDate(date.getDate() + column));\n        var collection = [];\n        var isDisabled = false;\n        if ((!isNullOrUndefined(value) && value.getMonth()) === (!isNullOrUndefined(this.currentDate) && this.currentDate.getMonth())) {\n            var tdEles = void 0;\n            if (this.calendarMode === 'Gregorian') {\n                tdEles = this.renderDays(value);\n            }\n            else {\n                tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\n            }\n            collection = tdEles.filter(function (element) {\n                return element.classList.contains(DISABLED);\n            });\n        }\n        else {\n            collection = this.tableBodyElement.querySelectorAll('td.' + DISABLED);\n        }\n        if (+value <= (+(max)) && +value >= (+(min))) {\n            if (collection.length) {\n                for (var i = 0; i < collection.length; i++) {\n                    // eslint-disable-next-line radix\n                    isDisabled = (+value === +new Date(parseInt(collection[i].id, 0))) ? true : false;\n                    if (isDisabled) {\n                        break;\n                    }\n                }\n            }\n        }\n        return isDisabled;\n    };\n    CalendarBase.prototype.getMaxDays = function (d) {\n        var date;\n        var tmpDate = new Date(this.checkValue(d));\n        date = 28;\n        var month = tmpDate.getMonth();\n        while (tmpDate.getMonth() === month) {\n            ++date;\n            tmpDate.setDate(date);\n        }\n        return date - 1;\n    };\n    CalendarBase.prototype.setDateDecade = function (date, year) {\n        date.setFullYear(year);\n        this.setProperties({ value: new Date(this.checkValue(date)) }, true);\n    };\n    CalendarBase.prototype.setDateYear = function (date, value) {\n        date.setFullYear(value.getFullYear(), value.getMonth(), date.getDate());\n        if (value.getMonth() !== date.getMonth()) {\n            date.setDate(0);\n            this.currentDate = new Date(this.checkValue(value));\n        }\n        this.setProperties({ value: new Date(this.checkValue(date)) }, true);\n    };\n    CalendarBase.prototype.compareMonth = function (start, end) {\n        var result;\n        if (start.getFullYear() > end.getFullYear()) {\n            result = 1;\n        }\n        else if (start.getFullYear() < end.getFullYear()) {\n            result = -1;\n        }\n        else {\n            result = start.getMonth() === end.getMonth() ? 0 : start.getMonth() > end.getMonth() ? 1 : -1;\n        }\n        return result;\n    };\n    CalendarBase.prototype.checkValue = function (inValue) {\n        if (inValue instanceof Date) {\n            return (inValue.toUTCString());\n        }\n        else {\n            return ('' + inValue);\n        }\n    };\n    CalendarBase.prototype.checkView = function () {\n        if (this.start !== 'Decade' && this.start !== 'Year') {\n            this.setProperties({ start: 'Month' }, true);\n        }\n        if (this.depth !== 'Decade' && this.depth !== 'Year') {\n            this.setProperties({ depth: 'Month' }, true);\n        }\n        if (this.getViewNumber(this.depth) > this.getViewNumber(this.start)) {\n            this.setProperties({ depth: 'Month' }, true);\n        }\n    };\n    CalendarBase.prototype.getDate = function (date, timezone) {\n        if (timezone) {\n            date = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n        }\n        return date;\n    };\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], CalendarBase.prototype, \"min\", void 0);\n    __decorate([\n        Property(true)\n    ], CalendarBase.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(null)\n    ], CalendarBase.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], CalendarBase.prototype, \"max\", void 0);\n    __decorate([\n        Property(null)\n    ], CalendarBase.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], CalendarBase.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property('Month')\n    ], CalendarBase.prototype, \"start\", void 0);\n    __decorate([\n        Property('Month')\n    ], CalendarBase.prototype, \"depth\", void 0);\n    __decorate([\n        Property(false)\n    ], CalendarBase.prototype, \"weekNumber\", void 0);\n    __decorate([\n        Property('FirstDay')\n    ], CalendarBase.prototype, \"weekRule\", void 0);\n    __decorate([\n        Property(true)\n    ], CalendarBase.prototype, \"showTodayButton\", void 0);\n    __decorate([\n        Property('Short')\n    ], CalendarBase.prototype, \"dayHeaderFormat\", void 0);\n    __decorate([\n        Property(false)\n    ], CalendarBase.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(null)\n    ], CalendarBase.prototype, \"keyConfigs\", void 0);\n    __decorate([\n        Property(null)\n    ], CalendarBase.prototype, \"serverTimezoneOffset\", void 0);\n    __decorate([\n        Event()\n    ], CalendarBase.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], CalendarBase.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], CalendarBase.prototype, \"navigated\", void 0);\n    __decorate([\n        Event()\n    ], CalendarBase.prototype, \"renderDayCell\", void 0);\n    CalendarBase = __decorate([\n        NotifyPropertyChanges\n    ], CalendarBase);\n    return CalendarBase;\n}(Component));\nexport { CalendarBase };\n/**\n * Represents the Calendar component that allows the user to select a date.\n * ```html\n * <div id=\"calendar\"/>\n * ```\n * ```typescript\n * <script>\n *   var calendarObj = new Calendar({ value: new Date() });\n *   calendarObj.appendTo(\"#calendar\");\n * </script>\n * ```\n */\nvar Calendar = /** @class */ (function (_super) {\n    __extends(Calendar, _super);\n    /**\n     * Initialized new instance of Calendar Class.\n     * Constructor for creating the widget\n     *\n     * @param {CalendarModel} options - Specifies the Calendar model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Calendar(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * To Initialize the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Calendar.prototype.render = function () {\n        if (this.calendarMode === 'Islamic' && this.islamicModule === undefined) {\n            throwError('Requires the injectable Islamic modules to render Calendar in Islamic mode');\n        }\n        if (this.isMultiSelection && typeof this.values === 'object' && !isNullOrUndefined(this.values) && this.values.length > 0) {\n            var tempValues = [];\n            var copyValues = [];\n            for (var limit = 0; limit < this.values.length; limit++) {\n                if (tempValues.indexOf(+this.values[limit]) === -1) {\n                    tempValues.push(+this.values[limit]);\n                    copyValues.push(this.values[limit]);\n                }\n            }\n            this.setProperties({ values: copyValues }, true);\n            for (var index = 0; index < this.values.length; index++) {\n                if (!this.checkDateValue(this.values[index])) {\n                    if (typeof (this.values[index]) === 'string' && this.checkDateValue(new Date(this.checkValue(this.values[index])))) {\n                        var copyDate = new Date(this.checkValue(this.values[index]));\n                        this.values.splice(index, 1);\n                        this.values.splice(index, 0, copyDate);\n                    }\n                    else {\n                        this.values.splice(index, 1);\n                    }\n                }\n            }\n            this.setProperties({ value: this.values[this.values.length - 1] }, true);\n            this.previousValues = this.values.length;\n        }\n        this.validateDate();\n        this.minMaxUpdate();\n        if (this.getModuleName() === 'calendar') {\n            this.setEnable(this.enabled);\n            this.setClass(this.cssClass);\n        }\n        _super.prototype.render.call(this);\n        if (this.getModuleName() === 'calendar') {\n            var form = closest(this.element, 'form');\n            if (form) {\n                EventHandler.add(form, 'reset', this.formResetHandler.bind(this));\n            }\n            this.setTimeZone(this.serverTimezoneOffset);\n        }\n        this.renderComplete();\n    };\n    Calendar.prototype.setEnable = function (enable) {\n        if (!enable) {\n            addClass([this.element], DISABLED);\n        }\n        else {\n            removeClass([this.element], DISABLED);\n        }\n    };\n    Calendar.prototype.setClass = function (newCssClass, oldCssClass) {\n        if (!isNullOrUndefined(oldCssClass)) {\n            oldCssClass = (oldCssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newCssClass)) {\n            newCssClass = (newCssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(oldCssClass) && oldCssClass !== '') {\n            removeClass([this.element], oldCssClass.split(' '));\n        }\n        if (!isNullOrUndefined(newCssClass)) {\n            addClass([this.element], newCssClass.split(' '));\n        }\n    };\n    Calendar.prototype.isDayLightSaving = function () {\n        var secondOffset = new Date(this.value.getFullYear(), 6, 1).getTimezoneOffset();\n        var firstOffset = new Date(this.value.getFullYear(), 0, 1).getTimezoneOffset();\n        return (this.value.getTimezoneOffset() < Math.max(firstOffset, secondOffset));\n    };\n    Calendar.prototype.setTimeZone = function (offsetValue) {\n        if (!isNullOrUndefined(this.serverTimezoneOffset) && this.value) {\n            var serverTimezoneDiff = offsetValue;\n            var clientTimeZoneDiff = new Date().getTimezoneOffset() / 60;\n            var timeZoneDiff = serverTimezoneDiff + clientTimeZoneDiff;\n            timeZoneDiff = this.isDayLightSaving() ? timeZoneDiff-- : timeZoneDiff;\n            this.value = new Date(this.value.getTime() + (timeZoneDiff * 60 * 60 * 1000));\n        }\n    };\n    Calendar.prototype.formResetHandler = function () {\n        this.setProperties({ value: null }, true);\n    };\n    Calendar.prototype.validateDate = function () {\n        if (typeof this.value === 'string') {\n            this.setProperties({ value: this.checkDateValue(new Date(this.checkValue(this.value))) }, true); // persist the value property.\n        }\n        _super.prototype.validateDate.call(this, this.value);\n        if (!isNullOrUndefined(this.value) && this.min <= this.max && this.value >= this.min && this.value <= this.max) {\n            this.currentDate = new Date(this.checkValue(this.value));\n        }\n        if (isNaN(+this.value)) {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    Calendar.prototype.minMaxUpdate = function () {\n        if (this.getModuleName() === 'calendar') {\n            if (!isNullOrUndefined(this.value) && this.value <= this.min && this.min <= this.max) {\n                this.setProperties({ value: this.min }, true);\n                this.changedArgs = { value: this.value };\n            }\n            else {\n                if (!isNullOrUndefined(this.value) && this.value >= this.max && this.min <= this.max) {\n                    this.setProperties({ value: this.max }, true);\n                    this.changedArgs = { value: this.value };\n                }\n            }\n        }\n        if (this.getModuleName() !== 'calendar' && !isNullOrUndefined(this.value)) {\n            if (!isNullOrUndefined(this.value) && this.value < this.min && this.min <= this.max) {\n                _super.prototype.minMaxUpdate.call(this, this.min);\n            }\n            else {\n                if (!isNullOrUndefined(this.value) && this.value > this.max && this.min <= this.max) {\n                    _super.prototype.minMaxUpdate.call(this, this.max);\n                }\n            }\n        }\n        else {\n            _super.prototype.minMaxUpdate.call(this, this.value);\n        }\n    };\n    Calendar.prototype.generateTodayVal = function (value) {\n        var tempValue = new Date();\n        if (!isNullOrUndefined(this.timezone)) {\n            tempValue = _super.prototype.getDate.call(this, tempValue, this.timezone);\n        }\n        if (value && isNullOrUndefined(this.timezone)) {\n            tempValue.setHours(value.getHours());\n            tempValue.setMinutes(value.getMinutes());\n            tempValue.setSeconds(value.getSeconds());\n            tempValue.setMilliseconds(value.getMilliseconds());\n        }\n        else {\n            tempValue = new Date(tempValue.getFullYear(), tempValue.getMonth(), tempValue.getDate(), 0, 0, 0, 0);\n        }\n        return tempValue;\n    };\n    Calendar.prototype.todayButtonClick = function (e) {\n        if (this.showTodayButton) {\n            var tempValue = this.generateTodayVal(this.value);\n            this.setProperties({ value: tempValue }, true);\n            this.isTodayClicked = true;\n            this.todayButtonEvent = e;\n            if (this.isMultiSelection) {\n                var copyValues = this.copyValues(this.values);\n                if (!_super.prototype.checkPresentDate.call(this, tempValue, this.values)) {\n                    copyValues.push(tempValue);\n                    this.setProperties({ values: copyValues });\n                }\n            }\n            _super.prototype.todayButtonClick.call(this, e, new Date(+this.value));\n        }\n    };\n    Calendar.prototype.keyActionHandle = function (e) {\n        _super.prototype.keyActionHandle.call(this, e, this.value, this.isMultiSelection);\n    };\n    /**\n     * Initialize the event handler\n     *\n     * @returns {void}\n     * @private\n     */\n    Calendar.prototype.preRender = function () {\n        var _this = this;\n        this.changeHandler = function (e) {\n            _this.triggerChange(e);\n        };\n        this.checkView();\n        _super.prototype.preRender.call(this, this.value);\n    };\n    /**\n     * @returns {void}\n\n     */\n    Calendar.prototype.createContent = function () {\n        this.previousDate = this.value;\n        this.previousDateTime = this.value;\n        _super.prototype.createContent.call(this);\n    };\n    Calendar.prototype.minMaxDate = function (localDate) {\n        return _super.prototype.minMaxDate.call(this, localDate);\n    };\n    Calendar.prototype.renderMonths = function (e, value, isCustomDate) {\n        _super.prototype.renderMonths.call(this, e, this.value, isCustomDate);\n    };\n    Calendar.prototype.renderDays = function (currentDate, value, isMultiSelect, values, isCustomDate, e) {\n        var tempDays = _super.prototype.renderDays.call(this, currentDate, this.value, this.isMultiSelection, this.values, isCustomDate, e);\n        if (this.isMultiSelection) {\n            _super.prototype.validateValues.call(this, this.isMultiSelection, this.values);\n        }\n        return tempDays;\n    };\n    Calendar.prototype.renderYears = function (e) {\n        if (this.calendarMode === 'Gregorian') {\n            _super.prototype.renderYears.call(this, e, this.value);\n        }\n        else {\n            this.islamicModule.islamicRenderYears(e, this.value);\n        }\n    };\n    Calendar.prototype.renderDecades = function (e) {\n        if (this.calendarMode === 'Gregorian') {\n            _super.prototype.renderDecades.call(this, e, this.value);\n        }\n        else {\n            this.islamicModule.islamicRenderDecade(e, this.value);\n        }\n    };\n    Calendar.prototype.renderTemplate = function (elements, count, classNm, e) {\n        if (this.calendarMode === 'Gregorian') {\n            _super.prototype.renderTemplate.call(this, elements, count, classNm, e, this.value);\n        }\n        else {\n            this.islamicModule.islamicRenderTemplate(elements, count, classNm, e, this.value);\n        }\n        this.changedArgs = { value: this.value, values: this.values };\n        this.changeHandler();\n    };\n    Calendar.prototype.clickHandler = function (e) {\n        var eve = e.currentTarget;\n        this.isPopupClicked = true;\n        if (eve.classList.contains(OTHERMONTH)) {\n            if (this.isMultiSelection) {\n                var copyValues = this.copyValues(this.values);\n                if (copyValues.toString().indexOf(this.getIdValue(e, null).toString()) === -1) {\n                    copyValues.push(this.getIdValue(e, null));\n                    this.setProperties({ values: copyValues }, true);\n                    this.setProperties({ value: this.values[this.values.length - 1] }, true);\n                }\n                else {\n                    this.previousDates = true;\n                }\n            }\n            else {\n                this.setProperties({ value: this.getIdValue(e, null) }, true);\n            }\n        }\n        var storeView = this.currentView();\n        _super.prototype.clickHandler.call(this, e, this.value);\n        if (this.isMultiSelection && this.currentDate !== this.value &&\n            !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0]) && storeView === 'Year') {\n            this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\n        }\n    };\n    Calendar.prototype.switchView = function (view, e, isMultiSelection, isCustomDate) {\n        _super.prototype.switchView.call(this, view, e, this.isMultiSelection, isCustomDate);\n    };\n    /**\n     * To get component name\n     *\n     * @returns {string} Return the component name.\n     * @private\n     */\n    Calendar.prototype.getModuleName = function () {\n        _super.prototype.getModuleName.call(this);\n        return 'calendar';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the properties to be maintained upon browser refresh.\n     *\n     * @returns {string}\n     */\n    Calendar.prototype.getPersistData = function () {\n        _super.prototype.getPersistData.call(this);\n        var keyEntity = ['value', 'values'];\n        return this.addOnPersist(keyEntity);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {CalendarModel} newProp - Returns the dynamic property value of the component.\n     * @param {CalendarModel} oldProp - Returns the previous property value of the component.\n     * @returns {void}\n     * @private\n     */\n    Calendar.prototype.onPropertyChanged = function (newProp, oldProp) {\n        this.effect = '';\n        this.rangeValidation(this.min, this.max);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'value':\n                    if (this.isDateSelected) {\n                        if (typeof newProp.value === 'string') {\n                            this.setProperties({ value: new Date(this.checkValue(newProp.value)) }, true);\n                        }\n                        else {\n                            newProp.value = new Date(this.checkValue(newProp.value));\n                        }\n                        if (isNaN(+this.value)) {\n                            this.setProperties({ value: oldProp.value }, true);\n                        }\n                        this.update();\n                    }\n                    break;\n                case 'values':\n                    if (this.isDateSelected) {\n                        if (typeof newProp.values === 'string' || typeof newProp.values === 'number') {\n                            this.setProperties({ values: null }, true);\n                        }\n                        else {\n                            var copyValues = this.copyValues(this.values);\n                            for (var index = 0; index < copyValues.length; index++) {\n                                var tempDate = copyValues[index];\n                                if (this.checkDateValue(tempDate) && !_super.prototype.checkPresentDate.call(this, tempDate, copyValues)) {\n                                    copyValues.push(tempDate);\n                                }\n                            }\n                            this.setProperties({ values: copyValues }, true);\n                            if (this.values.length > 0) {\n                                this.setProperties({ value: newProp.values[newProp.values.length - 1] }, true);\n                            }\n                        }\n                        this.validateValues(this.isMultiSelection, this.values);\n                        this.update();\n                    }\n                    break;\n                case 'isMultiSelection':\n                    if (this.isDateSelected) {\n                        this.setProperties({ isMultiSelection: newProp.isMultiSelection }, true);\n                        this.update();\n                    }\n                    break;\n                case 'enabled':\n                    this.setEnable(this.enabled);\n                    break;\n                case 'cssClass':\n                    if (this.getModuleName() === 'calendar') {\n                        this.setClass(newProp.cssClass, oldProp.cssClass);\n                    }\n                    break;\n                default:\n                    _super.prototype.onPropertyChanged.call(this, newProp, oldProp, this.isMultiSelection, this.values);\n            }\n        }\n        this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n    };\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    Calendar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        if (this.getModuleName() === 'calendar') {\n            var form = closest(this.element, 'form');\n            if (form) {\n                EventHandler.remove(form, 'reset', this.formResetHandler.bind(this));\n            }\n        }\n    };\n    /**\n     * This method is used to navigate to the month/year/decade view of the Calendar.\n     *\n     * @param {string} view - Specifies the view of the Calendar.\n     * @param {Date} date - Specifies the focused date in a view.\n     * @param {boolean} isCustomDate - Specifies whether the calendar is rendered with custom today date or not.\n     * @returns {void}\n\n     */\n    Calendar.prototype.navigateTo = function (view, date, isCustomDate) {\n        this.minMaxUpdate();\n        _super.prototype.navigateTo.call(this, view, date, isCustomDate);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the current view of the Calendar.\n     *\n     * @returns {string}\n\n     */\n    Calendar.prototype.currentView = function () {\n        return _super.prototype.currentView.call(this);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * This method is used to add the single or multiple dates to the values property of the Calendar.\n     *\n     * @param {Date | Date[]} dates - Specifies the date or dates to be added to the values property of the Calendar.\n     * @returns {void}\n\n     */\n    Calendar.prototype.addDate = function (dates) {\n        if (typeof dates !== 'string' && typeof dates !== 'number') {\n            var copyValues = this.copyValues(this.values);\n            if (typeof dates === 'object' && (dates).length > 0) {\n                var tempDates = dates;\n                for (var i = 0; i < tempDates.length; i++) {\n                    if (this.checkDateValue(tempDates[i]) && !_super.prototype.checkPresentDate.call(this, tempDates[i], copyValues)) {\n                        if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\n                            copyValues.push(tempDates[i]);\n                        }\n                        else {\n                            copyValues = [new Date(+tempDates[i])];\n                        }\n                    }\n                }\n            }\n            else {\n                if (this.checkDateValue(dates) && !_super.prototype.checkPresentDate.call(this, dates, copyValues)) {\n                    if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\n                        copyValues.push((dates));\n                    }\n                    else {\n                        copyValues = [new Date(+dates)];\n                    }\n                }\n            }\n            this.setProperties({ values: copyValues }, true);\n            if (this.isMultiSelection) {\n                this.setProperties({ value: this.values[this.values.length - 1] }, true);\n            }\n            this.validateValues(this.isMultiSelection, copyValues);\n            this.update();\n            this.changedArgs = { value: this.value, values: this.values };\n            this.changeHandler();\n        }\n    };\n    /**\n     * This method is used to remove the single or multiple dates from the values property of the Calendar.\n     *\n     * @param {Date | Date[]} dates - Specifies the date or dates which need to be removed from the values property of the Calendar.\n     * @returns {void}\n\n     */\n    Calendar.prototype.removeDate = function (dates) {\n        if (typeof dates !== 'string' && typeof dates !== 'number' && !isNullOrUndefined(this.values) && this.values.length > 0) {\n            var copyValues = this.copyValues(this.values);\n            if (typeof dates === 'object' && ((dates).length > 0)) {\n                var tempDates = dates;\n                for (var index = 0; index < tempDates.length; index++) {\n                    for (var i = 0; i < copyValues.length; i++) {\n                        if (+copyValues[i] === +tempDates[index]) {\n                            copyValues.splice(i, 1);\n                        }\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < copyValues.length; i++) {\n                    if (+copyValues[i] === +dates) {\n                        copyValues.splice(i, 1);\n                    }\n                }\n            }\n            this.setProperties({ values: copyValues }, false);\n            this.update();\n            if (this.isMultiSelection) {\n                this.setProperties({ value: this.values[this.values.length - 1] }, true);\n            }\n            this.changedArgs = { value: this.value, values: this.values };\n            this.changeHandler();\n        }\n    };\n    /**\n     * To set custom today date in calendar\n     *\n     * @param {Date} date - Specifies date value to be set.\n     * @private\n     * @returns {void}\n     */\n    Calendar.prototype.setTodayDate = function (date) {\n        var todayDate = new Date(+date);\n        this.setProperties({ value: todayDate }, true);\n        _super.prototype.todayButtonClick.call(this, null, todayDate, true);\n    };\n    Calendar.prototype.update = function () {\n        this.validateDate();\n        this.minMaxUpdate();\n        _super.prototype.setValueUpdate.call(this);\n    };\n    Calendar.prototype.selectDate = function (e, date, element) {\n        _super.prototype.selectDate.call(this, e, date, element, this.isMultiSelection, this.values);\n        if (this.isMultiSelection && !isNullOrUndefined(this.values) && this.values.length > 0) {\n            this.setProperties({ value: this.values[this.values.length - 1] }, true);\n        }\n        this.changedArgs = { value: this.value, values: this.values };\n        this.changeHandler(e);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Calendar.prototype.changeEvent = function (e) {\n        if ((this.value && this.value.valueOf()) !== (this.previousDate && +this.previousDate.valueOf())\n            || this.isMultiSelection) {\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', this.changedArgs);\n            }\n            this.previousDate = new Date(+this.value);\n        }\n    };\n    Calendar.prototype.triggerChange = function (e) {\n        if (!isNullOrUndefined(this.todayButtonEvent) && this.isTodayClicked) {\n            e = this.todayButtonEvent;\n            this.isTodayClicked = false;\n        }\n        this.changedArgs.event = e || null;\n        this.changedArgs.isInteracted = !isNullOrUndefined(e);\n        if (!isNullOrUndefined(this.value)) {\n            this.setProperties({ value: this.value }, true);\n        }\n        if (!this.isMultiSelection && +this.value !== Number.NaN && (!isNullOrUndefined(this.value) && !isNullOrUndefined(this.previousDate) && +new Date(this.value.toDateString()) !== +new Date(this.previousDate.toDateString()) || this.previousDate == null\n            && !isNaN(+this.value))) {\n            this.changeEvent(e);\n        }\n        else if (!isNullOrUndefined(this.values) && this.previousValues !== this.values.length) {\n            this.changeEvent(e);\n            this.previousValues = this.values.length;\n        }\n    };\n    __decorate([\n        Property(null)\n    ], Calendar.prototype, \"value\", void 0);\n    __decorate([\n        Property(null)\n    ], Calendar.prototype, \"values\", void 0);\n    __decorate([\n        Property(false)\n    ], Calendar.prototype, \"isMultiSelection\", void 0);\n    __decorate([\n        Event()\n    ], Calendar.prototype, \"change\", void 0);\n    Calendar = __decorate([\n        NotifyPropertyChanges\n    ], Calendar);\n    return Calendar;\n}(CalendarBase));\nexport { Calendar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}